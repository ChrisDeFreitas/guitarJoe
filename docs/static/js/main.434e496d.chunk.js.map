{"version":3,"sources":["guitar_lib.js","resources/logo.svg","FretPnl.js","QueryPnl.js","Fretboard.js","AboutDlg.js","App.js","index.js"],"names":["q","chords","list","name","abr","intervals","byName","str","chord","Object","assign","obj","root","chordName","ivls","preferFlats","indexOf","note","iname","ivl","notes","calc","push","type","fullName","fullAbbrev","fretboard","strings","num","octave","semis","tabLetter","fretMin","fretMax","fretMinSet","nn","init","fretMaxSet","ii","length","strg","strgN","fretInRange","max","fret","Number","strgnum","tab","bySemis","objBySemis","objByTab","ltr","substr","tabByFret","strN","byNote","toUpperCase","nm","returnFirst","alpha","ivlOrName","rprefix","rsuffix","iprefix","idx","newlet","newsfx","local_inc","objByNote","fobj","match","nobjList","fnd","nidx","slice","comparisons","iidx","splice","Math","floor","scales","short","scaleName","scale","ivlAbr","shortName","abbrevName","octaveNum","_g","FretPnl","props","buttonClick","bind","fretBtnTextChange","fretClick","fretFltrClick","strgFltrClick","event","qry","this","btn","target","nodeName","parentNode","rootType","dataset","state","stateChange","fretSelect","fretSelectFind","selected","stopPropagation","fretBtnText","cell","strn","isNaN","console","log","fretfilter","clientY","getBoundingClientRect","top","offsetHeight","strgFltr","document","querySelector","currentTarget","newstate","nobj","capStyle","btnState","fsmatch","noteFilter","btncaption","key","className","onClick","qq","local_rootFind","button","local_noteFind","local_fretSelectFind","fso","local_fretSelectMatchFind","fretSelectMatch","local_octaveFind","local_scaleFind","local_chordFind","local_ivlFind","trArray","first","fretFirst","last","fretLast","ss","row","frets","col","fretFltr","fretFilter","btnStrFltr","cls","collapsed","onMouseDown","stringdiv","selNoteVal","React","Component","QueryPnl","btnDupeClick","btnDelClick","selLabelClick","selChordChange","btnClearClick","btnCollapseClick","selIntervalChange","selNoteChange","selOctaveChange","selScaleChange","fsChordClick","fsScaleClick","infoNoteClick","remove","duplicate","val","reset","lbl","ivlName","sel","options","selectedIndex","text","value","onChange","omin","oct","chd","html","title","noblist","filter","a","lastkey","lastname","iobj","ob","forEach","drawFretSelectMatches","selNote","selOct","selInt","selScale","selChord","drawSelNote","drawSelOctave","drawSelInterval","drawSelScale","drawSelChord","infoPnl","drawInfo","arrow","fbid","Fretboard","strgFltrList","fretRoot","makeQuery","setState","objOrTab","Array","isArray","sort","b","flt","Error","replace","id","About","trigger","modal","nested","close","href","_excluded","_extends","i","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLogo","_ref","svgRef","titleId","xmlns","viewBox","x","y","ref","fill","stroke","strokeWidth","d","points","width","height","ForwardRef","App","useState","fbs","setFbs","newid","setNewId","indexOfFbid","nid","fbCount","el","alt","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.434e496d.chunk.js","sourcesContent":["/*\n  //♭ &flat; alt+?\n  \n  GuitarJoe's guitar logic\n  by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  \n   Note:\n    - note refers to what we usually call a note: C#\n    - note object: { strgnum:int, fret:int, note:'C#', semis:49, ... }\n    - note.semis is unique\n    - fret is an integer\n    - fobj is a fret object: frets.obj() => { strg:{}, fret:int, tab:'e12' }\n    - ivl is an interval object: intervals.list[n]\n    - assume: exception handling performed by caller\n\n  Todo:\n    - refactor for code consistency\n    - fix q.chords.make() (when code needed)\n    - (when needed) update notes.calc() for ##/bb -- see comments in function\n  \n */\n\nvar q = {\n\n  chords: {\n    //verified against: https://www.omnicalculator.com/other/chord\n    list:[\n      {\n        name:'Major triad', abr:'maj',\n        intervals:[ 'P1', 'M3', 'P5' ]\n      },{\n        name:'Minor triad', abr:'min',\n        intervals:[ 'P1', 'm3', 'P5' ]\n      },{\n        name:'Augmented triad', abr:'aug',\n        intervals:[ 'P1', 'M3', 'A5' ]\n      },{\n        name:'Diminished triad', abr:'dim',\n        intervals:[ 'P1', 'm3', 'd5' ]\n      },{\n        name:'Dominant seventh', abr:'7',\n        intervals:[ 'P1', 'M3', 'P5', 'm7' ]\n      },{\n        name:'Major seventh', abr:'maj7',\n        intervals:[ 'P1', 'M3', 'P5', 'M7' ]\n      },{\n        name:'Minor seventh', abr:'min7',\n        intervals:[ 'P1', 'm3', 'P5', 'm7' ]\n      },{\n        name:'Major sixth', abr:'maj6',\n        intervals:[ 'P1', 'M3', 'P5', 'M6' ]\n      },{\n        name:'Minor sixth', abr:'min6',\n        intervals:[ 'P1', 'm3', 'P5', 'M6' ]\n      },{\n        name:'Suspended second', abr:'sus2',\n        intervals:[ 'P1', 'M2', 'P5' ]\n      },{\n        name:'Suspended fourth', abr:'sus4',\n        intervals:[ 'P1', 'P4', 'P5' ]\n      }\n    ],\n    byName( str ){\n      for(let chord of q.chords.list){\n        if(chord.abr === str || chord.name === str)\n          return Object.assign({}, chord )\n      }\n      return null\n    },\n    // todo: fix\n    // make( letter, chordAbbrev, octaveNum ){\n    //   let chord = q.chords.byName( chordAbbrev )\n    //   let semis = []\n    //   for(let stepnum = 0; stepnum < chord.semis.length; stepnum++){\n    //     let step = chord.semis[stepnum]\n    //     semis.push( q.semis.calc( step, octaveNum) )\n    //   }\n    //   return {\n    //     letter: letter.toUpperCase(),\n    //     octaveNum: octaveNum,\n    //     name:chord.name, abr:chord.abr, \n    //     semis: semis\n    //   }\n    //},\n    obj( root, chordName ){  //return chord with notes based on root\n      let ivls = [],\n        chord = q.chords.byName( chordName )\n      if(chord === null) return null\n\n      if(typeof root === 'string')\n        root = q.intervals.byName( root )   //object returned to caller\n      if(root === null) return null\n\n      let preferFlats = ( \n          chord.name.indexOf('Minor') >= 0  \n        ||chord.name.indexOf('Diminished') >= 0 \n        || root.note.indexOf('♭') >= 0)\n      for(let iname of chord.intervals){\n        let ivl = q.intervals.byName( iname )\n        let note = q.notes.calc( root, ivl, preferFlats )\n        ivls.push( Object.assign({}, ivl, { note:note } ))\n      }\n\n      let obj = Object.assign({}, chord, {\n        type:'chord',\n        fullName: root.note +' '+chord.name,\n        fullAbbrev: root.note +chord.abr,\n        root: Object.assign({}, root),\n        ivls:ivls\n       })\n\n      return obj\n    }\n  },\n\n  fretboard: {\n    strings: [\n      {num:1, note:'E', octave:4, semis:0, tabLetter:'e' },\n      {num:2, note:'B', octave:3, semis:0, tabLetter:'B' },\n      {num:3, note:'G', octave:3, semis:0, tabLetter:'G' },\n      {num:4, note:'D', octave:3, semis:0, tabLetter:'D' },\n      {num:5, note:'A', octave:2, semis:0, tabLetter:'A' },\n      {num:6, note:'E', octave:2, semis:0, tabLetter:'E' }\n    ],\n\n    fretMin:1,\n    fretMax:14,\n    fretMinSet( nn ){   //not used as yet\n      q.fretboard.fretMin = nn\n      q.fretboard.init()\n    },\n    fretMaxSet( nn ){   //not used as yet\n      q.fretboard.fretMax = nn\n      q.fretboard.init()\n    },\n\n    init(){\n      for(let ii = 0; ii <= q.fretboard.strings.length -1; ii++){\n        let strg = q.fretboard.strings[ii]\n        q.fretboard.strings[ii].semis = q.semis.calc(strg.note, strg.octave)\n      }\n    },\n    strg( strgN ){  \n      return Object.assign({}, q.fretboard.strings[ strgN -1 ])\n    },\n    fretInRange(note, root, num = 3){\n      let max = (num <= 5 ?5 :num)\n      if((root.fret <= 1 && note.fret <= max)\n      || (root.fret > 1 && note.fret >= (root.fret -num)  &&  note.fret <= (root.fret +num) ))\n        return true\n      return null\n    },\n    obj( strg, fret ){\n      if( typeof strg === 'number')\n        strg = q.fretboard.strg( strg )\n      let semis = strg.semis +Number(fret)\n      return {\n        fret:fret, \n        // strg:Object.assign( {}, strg ), \n        strgnum:strg.num, \n        tab:(strg.tabLetter +fret),\n        semis: semis,\n        notes: q.notes.bySemis(semis)\n      }\n    },\n    objBySemis( semis ){\n      let fret = null,\n        fretMax = q.fretboard.fretMax\n      for(let strg of q.fretboard.strings){\n        if(semis >= strg.semis && semis <= (strg.semis +fretMax)){\n          fret = ( semis -strg.semis )\n          return q.fretboard.obj( strg, fret )\n        }\n      }\n      return null\n    },\n    objByTab( tab ){\n      let ltr = tab.substr(0,1),\n        fret = Number(tab.substr(1))\n      for( let strg of q.fretboard.strings ){\n        if(strg.tabLetter === ltr){\n          return q.fretboard.obj( strg, fret )\n        }\n      }\n      return null\n    },\n    tabByFret( strN, fret ){  // return example: 'e12'\n      strN = Number( strN )\n      for( let strg of q.fretboard.strings ){\n        if(strg.num === strN){\n          return ( strg.tabLetter +fret )\n        }\n      }\n      return null\n    },\n  },\n\n  intervals:{\n    list:[\n      //rules:\n      // 1. order by semitones\n      // 2. prefer perfect, major, minor first\n      // 3. prefer minor over diminished\n      // 4. prefer augmented last\n      // 5. removed (♭♭, TT) because added complexity not relevant to most uses\n      // \n      {name:'Perfect unison', abr:'P1',  semis:0, note:'C' },\n      //{name:'Diminished second', abr:'d2', semis:0, note:'D♭♭' },\n      \n      {name:'Minor second', abr:'m2', semis:1, note:'D♭' },\n      {name:'Augmented unison', abr:'A1', semis:1, note:'C#' },\n      \n      {name:'Major second', abr:'M2', semis:2, note:'D' },\n      // {name:'Diminished third', abr:'d3', semis:2, note:'E♭♭' },\n      \n      {name:'Minor third', abr:'m3', semis:3, note:'E♭' },\n      {name:'Augmented second', abr:'A2', semis:3, note:'D#' },\n      \n      {name:'Major third', abr:'M3', semis:4, note:'E' },\n      {name:'Diminished fourth', abr:'d4', semis:4, note:'F♭' },\n\n      {name:'Perfect fourth', abr:'P4', semis:5, note:'F'},\n      {name:'Augmented third', abr:'A3', semis:5, note:'E#'},\n      \n      {name:'Diminished fifth', abr:'d5', semis:6, note:'G♭' },\n      {name:'Augmented fourth', abr:'A4', semis:6, note:'F#' },\n      // {name:'Tritone', abr:'TT', semis:6, note:'TT' },\n      \n      {name:'Perfect fifth', abr:'P5', semis:7, note:'G' },\n      // {name:'Diminished sixth', abr:'d6', semis:7, note:'A♭♭' },\n      \n      {name:'Minor sixth', abr:'m6', semis:8, note:'A♭' },\n      {name:'Augmented fifth', abr:'A5', semis:8, note:'G#' },\n      \n      {name:'Major sixth', abr:'M6', semis:9, note:'A' },\n      // {name:'Diminished seventh', abr:'d7', semis:9, note:'B♭♭' },\n      \n      {name:'Minor seventh', abr:'m7', semis:10, note:'B♭' },\n      {name:'Augmented sixth', abr:'A6', semis:10, note:'A#' },\n      \n      {name:'Major seventh', abr:'M7', semis:11, note:'B' },\n      {name:'Diminished octave', abr:'d8', semis:11, note:'C♭' },\n      \n      {name:'Perfect octave', abr:'P8', semis:12, note:'C' },\n      {name:'Augmented seventh', abr:'A7', semis:12, note:'B#' },\n    ],\n  \n    byNote( note ){\n      note = note.toUpperCase()\n      for(let ivl of q.intervals.list){\n        if(ivl.note === note)\n          return Object.assign({}, ivl)\n      }\n      return null\n    },\n    byName( nm ){\n      let note = nm.toUpperCase()\n      for(let ivl of q.intervals.list){\n        if(ivl.abr === nm || ivl.note === note || ivl.name === nm)\n          return Object.assign({}, ivl)\n      }\n      return null\n    },\n    bySemis( semis, returnFirst = false ){   //return intervals where semis match\n      semis = semis % 12\n      let list = []\n      for(let ivl of q.intervals.list){\n        if(ivl.semis > semis) break    //shortcircuit, intervals ordered by semis\n        if(ivl.semis === semis){\n          let obj = Object.assign({}, ivl)\n          if(returnFirst === true) return obj\n          list.push( obj )\n        }\n      }\n      return list\n    }\n  },\n\n  notes:{\n    list:['C','C#','D♭','D','D#','E♭','E','F','F#','G♭','G','G#','A♭','A','A#','B♭','B'],\n    alpha:['C','D','E','F','G','A','B'],\n\n    bySemis( semis, returnFirst = false ){\n      let list = []\n      semis = Number(semis) % 12\n      for(let ivl of q.intervals.list ){\n        if(ivl.semis === semis){\n          if(returnFirst === true) return ivl.note\n          list.push( ivl.note )\n        }\n        if(ivl.semis > semis) break //intervals ordered by semis\n      }\n      return list\n    },\n    calc( root, ivlOrName, preferFlats = false){  //iterate by semitones to get new note with correct #/b\n      // assume: preferFlats === true: return only flats\n\n      // to handle ##/bb:\n      // 1. pre-loop: resolve to standard note, get new root interval, proceed as normal: C## => D\n      // 2. post loop(???): if ivl requires ##/bb, manually resolve based on new note: D => C##\n\n      if(typeof root === 'object') root = root.note\n      let rprefix = root.substr(0,1)\n      let rsuffix = root.substr(1,2)\n      // console.log('root='+root, 'rprefix='+rprefix, 'rsuffix='+rsuffix)\n\n      let ivl = (typeof ivlOrName === 'object' ?ivlOrName : q.intervals.byName(ivlOrName))\n      let iprefix = ivl.abr.substr(0,1)    // A as in A1\n      // console.log('ivl.abr='+ivl.abr, 'iprefix='+iprefix )\n\n      // test: display matching intervals\n      // let rivl = q.intervals.byName( root )\n      // let list = q.intervals.bySemis( rivl.semis +ivl.semis )\n      // console.log( 'ivl.semis='+ivl.semis, '\\nlist=', list  )\n\n      //assume: no ## or bb used\n      let max = ivl.semis, idx = 0    //idx = q.notes.alpha.indexOf( ltr ) ::: test\n      let newlet = rprefix, newsfx = rsuffix\n      function local_inc( ltr ){\n        idx = q.notes.alpha.indexOf( ltr ) // this can probably be refactored out: notes.alpha[idx % 7] always === newlet; lookup not required\n        idx++\n        return q.notes.alpha[ idx % 7]\n      }\n      for(let ii = 0; ii < max; ii++){\n        // console.log('root='+root, 'newlet='+newlet+newsfx)\n        if(newlet === 'B' && newsfx === ''){ \n          newlet = 'C'; \n        }else\n        if(newlet === 'E' && newsfx === ''){ \n           newlet = 'F'; \n        }else\n        if(newsfx === '♭'){\n          newsfx = ''\n        }else\n        if(newsfx === '#'){\n          newsfx = ''\n          newlet = local_inc( newlet )\n        } \n        else  //newsfx === ''\n        if(iprefix === 'm' || iprefix === 'd'  || preferFlats === true){\n          newsfx = '♭'\n          newlet = local_inc( newlet )\n        }\n        else\n          newsfx = '#'\n      }\n      // console.log('root='+root, 'newlet='+newlet+newsfx)\n      return newlet+newsfx\n    },\n\n    obj( strg, fret, note = null  ){\n      if(typeof strg === 'number')\n        strg = q.fretboard.strg( strg )\n      let semis = strg.semis +fret,\n          octave = q.octave(semis),\n          list = q.notes.bySemis( semis )\n      return {\n        fret: fret,\n        note: (note === null ?list[0] :note),\n        notes: list,\n        octave: octave,\n        semis: semis,\n        // strg: strg, \n        strgnum: strg.num, \n        tab: strg.tabLetter +fret\n      }\n    },\n    objByNote( note ){\n      let ivl = q.intervals.byNote( note ),\n          semis = ivl.semis,\n          // octave = q.octave( semis ),\n          list = q.notes.bySemis( semis )\n          //, fobj = q.fretboard.objBySemis( semis )\n      return {\n        fret: null, // fobj.fret,    //null because input is not specific to a fret\n        note:note,\n        notes:list,\n        octave:null,  //octave,\n        semis:semis,\n        // strg: null, // fobj.strg,\n        strgnum: null, // fobj.strg.num,\n        tab: null // fobj.tab,\n      }\n    },\n    objByTab( tab ){\n      let fobj = q.fretboard.objByTab( tab )\n      return q.notes.obj( fobj.strg, fobj.fret )\n    },\n\n\n    match( ivls, nobjList ){    //return true/false if notes in nobjList contained within ivls\n      //used to match scales and chords to user selected frets\n      //assume: ivls is a list of intervals.list[n]\n      //assume: nobjList is a list of notes.obj()\n      //assume: no duplicate items\n      //assume: ivls.length > nobjList.length \n      //assume: there may be ivls[n] between matched items: c,e matches c,d,e\n      //assume: matches may occur across head/tail boundaries: e,c matches c,d,e\n      //generally this is a pattern matching algorithm between two lists\n      //assume: break on first match of all items in nobjList\n      if(nobjList.length > ivls.length) return false\n\n      let list = nobjList.slice()   //to support rotating list\n      let fnd, nidx\n\n      for(let comparisons = 1; comparisons <= list.length; comparisons++){ //max comparisons = original pattern +(list.length -1) rotations \n\n        fnd = false; nidx = 0    //reset search params\n        for(let iidx = 0; iidx < ivls.length; iidx++){    //iterate ivls\n          if(list[nidx].notes.indexOf( ivls[iidx].note ) >= 0){ //increment when list item found; allows for gaps in range\n            if(++nidx === list.length){   //point to next list item\n              // console.log( 'found:', comparisons, list, ivls )\n              fnd = true; break   \n            } \n          }\n        }\n\n        if(fnd === true) break\n        list.push( list.splice(0,1)[0] ) //rotate list by moving head to tail\n      }\n\n      return fnd\n    },\n  },\n\n  octave( semis ){\n    return Math.floor( semis / 12 )\n  },\n\n  scales:{\n    list:[\n      // tested with: https://www.omnicalculator.com/other/music-scale\n      //            https://www.scales-chords.com/scalenav.php\n      // rules:\n      //   keep accidentals of the same type -- all flat or sharp\n      { name:'Major', abr:'M', short:'Major',\n        // list:[ 'C', 'D', 'E', 'F', 'G', 'A', 'B'],\n        intervals:['P1','M2','M3','P4','P5','M6','M7']\n      },\n      { name:'Natural minor', abr:'m', short:'Minor', \n        // list:[ 'C', 'D', 'D#', 'F', 'G', 'A', 'A#'],\n        intervals:['P1','M2','m3','P4','P5','m6','m7']\n      },\n      { name:'Pentatonic major', abr:'P', short:'Pen.Maj', \n        // list:[ 'C', 'D', 'E', 'G', 'A'],\n        intervals:['P1','M2','M3','P5','M6']\n      },\n      { name:'Pentatonic minor', abr:'p', short:'Pen.min',\n        // list:[ 'C', 'D#', 'F', 'G', 'A#'],\n        intervals:['P1','m3','P4','P5','m7']\n      },\n      { name:'Blues heptatonic', abr:'B7', short:'Blues7',\n        intervals:['P1','M2','m3','P4','d5','M6','m7']\n      },\n      { name:'Blues hexatonic', abr:'B6', short:'Blues6',\n        // 1, ♭3, 4, ♭5, 5, ♭7\n        intervals:['P1','m3','P4','d5','P5','m7']\n      },\n      { name:'Akebono I', abr:'Ak1', short:'Akebono1',\n        intervals:['P1','M2','m3','P5','M6']   // https://ianring.com/musictheory/scales/653 {0,2,3,7,9}\n      },\n      { name:'Akebono II', abr:'Ak2', short:'Akebono2',\n        intervals:['P1','m2','M3','P5','m6']\n        // https://pianoencyclopedia.com/scales/akebono-ii/C-akebono-ii.html:  C, bD, E, G, bA \n        // also: https://ianring.com/musictheory/scales/419\n        // also: https://www.flutopedia.com/csc_5tone_12tet.htm\n      },\n      // { name:'Chromatic', abr:'Ch', short:'Chromatic',\n      //   intervals:['P1','m2','M2','m3','M3','P4','d5','P5','m6','M6','m7','M7']\n      // },\n      { name:'Double harmonic', abr:'DH', short:'Dbl.Hrm',\n        // minor second, major third, perfect fourth and fifth, minor sixth, major seventh -- https://en.wikipedia.org/wiki/Double_harmonic_scale\n        intervals:['P1','m2','M3','P4','P5','m6','M7']\n      },\n      { name:'Gypsy minor', abr:'Gm', short:'Gypsy',\n        // step pattern is W, H, +, H, H, +, H -- https://en.wikipedia.org/wiki/Hungarian_minor_scale\n        intervals:['P1','M2','m3','d5','P5','m6','M7']\n      },\n      { name:'Hungarian major', abr:'HM', short:'Hungarian',\n        // semitones: 3, 1, 2, 1, 2, 1, 2 -- https://en.wikipedia.org/wiki/Hungarian_major_scale\n        intervals:['P1','m3','M3','d5','P5','M6','m7']\n      },\n      { name:'Phrygian dominant', abr:'Pd', short:'Phrygian',\n        //1 – ♭2 – 3 – 4 – 5 – ♭6 – ♭7 – 1  https://en.wikipedia.org/wiki/Phrygian_dominant_scale\n        intervals:['P1','m2','M3','P4','P5','m6','m7']\n      },\n      { name:'Pygmy', abr:'Py', short:'Pygmy',\n        intervals:['P1','M2','m3','P5','m7']\n        // https://ianring.com/musictheory/scales/397  {0,2,3,7,8}\n        // also: https://alchetron.com/Pygmy-music#Pygmy-scale\n      }\n    ],\n    byName( scaleName ){\n      for(let scale of q.scales.list){\n        if(scale.name === scaleName || scale.short === scaleName || scale.abr === scaleName)\n          return Object.assign({}, scale)\n      }\n      return null\n    },\n    obj( root, scaleName ){  //return scale, root and scale intervals\n      let ivls = []\n\n      if(typeof root === 'string')        //else interval object\n        root = q.intervals.byName( root )\n      if(root === null) return null\n\n      let scale = q.scales.byName( scaleName )\n      if(scale === null) return null\n\n      let preferFlats = ( scaleName.indexOf('minor') >= 0 || root.note.indexOf('♭') >= 0 )\n\n      for(let ivlAbr of scale.intervals){   //generate intervals for scale built on root\n        let ivl = q.intervals.byName( ivlAbr )\n        let note = q.notes.calc( root, ivl, preferFlats )\n        ivl = Object.assign( {}, ivl, {\n          abr: ivlAbr,    //abbreviation may differ from one assigned to scale\n          note:note,\n        })\n        ivls.push( ivl )\n      }\n\n      let obj = Object.assign( {}, scale, {\n        type:'scale',\n        fullName: root.note +' '+scale.name,\n        shortName: root.note +' '+scale.short,\n        abbrevName: root.note +scale.abr,\n        root: Object.assign({}, root),\n        ivls: ivls \n      })\n      return obj\n    }\n  },\n\n  semis:{\n    calc(note, octaveNum){   //return number of semitones\n        //assume: ocatveNum range: 0 to infinity\n        //assume: Middle C (C4) == (C,4) == (48 +0) == 48\n        //assume:            C0 == (C,0) == ( 0 +0) ==  0\n        //assume: A440     (A4) == (A,4) == (48 +9) == 57\n        let semis = (octaveNum *12)\n        semis += q.intervals.byName( note ).semis\n        return semis\n    },\n  },\n}\n\n\nq.fretboard.init()\nexport default q","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 64 64\",\n    x: \"0px\",\n    y: \"0px\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"#ffffff\",\n    stroke: \"#0006\",\n    strokeWidth: \"1px\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30,23v-4a2,2,0,1,0,0,4Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M48,24V18.038L47.967,18H32.033L32,18.038V25a7.979,7.979,0,0,0,3.556,6.648l.124.078a8.078,8.078,0,0,0,8.762-.076A7.982,7.982,0,0,0,48,25ZM35.5,22A1.5,1.5,0,1,1,37,20.5,1.5,1.5,0,0,1,35.5,22Zm3.361,6H37V26h1.861a7.445,7.445,0,0,0,3.635-.864L43.5,26.864A9.353,9.353,0,0,1,38.861,28ZM44.5,22A1.5,1.5,0,1,1,46,20.5,1.5,1.5,0,0,1,44.5,22Z\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"17.279 13 18 10.838 18 4 13 4 13 10.838 13.721 13 17.279 13\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17,35.226V15H14V35.226A5.657,5.657,0,0,1,17,35.226Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M50,19v4a2,2,0,0,0,0-4Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M48,11.41v-.021q0-.66-.034-1.324c0-.022,0-.043,0-.065H32.038c0,.022,0,.044,0,.066-.022.441-.033.883-.034,1.323V12H48Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M31,16H49a3.006,3.006,0,0,0,2.829-2H28.171A3.006,3.006,0,0,0,31,16Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M47.613,6.793A3.329,3.329,0,0,0,44.32,4a3.357,3.357,0,0,0-2.781,1.489,1.853,1.853,0,0,1-3.076,0A3.359,3.359,0,0,0,35.68,4a3.33,3.33,0,0,0-3.292,2.79c-.067.4-.1.806-.154,1.21H47.766C47.716,7.6,47.679,7.19,47.613,6.793Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M40,35a9.941,9.941,0,0,1-4-.847V36.17a2,2,0,0,1-1.637,1.963l-1.188.224.383,1.576a6.629,6.629,0,0,0,12.884,0l.383-1.576-1.19-.224A2,2,0,0,1,44,36.17V34.147A9.946,9.946,0,0,1,40,35Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18,57V56H11a1,1,0,0,1-1-1V51a1,1,0,0,1,1-1h7V45.4a5.495,5.495,0,0,1-6-9.131V29.151a5.078,5.078,0,0,0-3.991,4.606,4.891,4.891,0,0,0,.041.926,12.5,12.5,0,0,1-2.032,9.29A9.98,9.98,0,0,0,4,50.3,10.262,10.262,0,0,0,14.35,60h2.3a10.328,10.328,0,0,0,1.8-.161A4.013,4.013,0,0,1,18,58Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22.7,58H20a1.958,1.958,0,0,0,.814,1.608A2.01,2.01,0,0,0,22,60h4a1.006,1.006,0,0,1-.555-.168Z\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"28 60 28.017 59.998 26 60 28 60\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"53.303 51 60 51 60 49 56.303 49 53.303 51\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M59.941,43.492c-.005-.031-.013-.062-.018-.093a3.991,3.991,0,0,0-.142-.523c-.025-.069-.05-.137-.078-.2a3.814,3.814,0,0,0-.239-.509h0a3.982,3.982,0,0,0-.377-.54c-.014-.018-.03-.034-.045-.051a4.006,4.006,0,0,0-.914-.786c-.06-.038-.12-.075-.18-.108a3.871,3.871,0,0,0-.511-.245l-.041-.017a4.017,4.017,0,0,0-.67-.186l-7.941-1.466-.4,1.643a8.629,8.629,0,0,1-16.772,0l-.4-1.643-7.941,1.466a3.962,3.962,0,0,0-1.248.461c-.044.025-.087.051-.132.079a3.953,3.953,0,0,0-.388.277c-.063.051-.125.1-.184.156-.1.09-.191.186-.28.284-.059.065-.118.13-.173.2a4,4,0,0,0-.576,1c-.025.062-.049.125-.071.189a3.913,3.913,0,0,0-.158.583v0a4.035,4.035,0,0,0-.063.708V47h4a1.006,1.006,0,0,1,.555.168L30.3,51H49.7l5.748-3.832A1.006,1.006,0,0,1,56,47h4V44.162A4.012,4.012,0,0,0,59.941,43.492Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30,53a1.006,1.006,0,0,1-.555-.168L23.7,49H20v7h3a1.006,1.006,0,0,1,.555.168L26.3,58H32l20.1,2.005L58,60a2,2,0,0,0,2-2V53H30Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.448,37.594a3.542,3.542,0,0,0-3.893,0,3.492,3.492,0,1,0,4.619,5.133l.012-.059a.716.716,0,0,1,.023-.1c.028-.1.077-.2.11-.293.042-.127.089-.251.14-.374.038-.092.06-.184.1-.277.079-.164.158-.311.238-.451l0-.01c.053-.093.109-.174.163-.257A3.571,3.571,0,0,0,19,40.5,3.469,3.469,0,0,0,17.448,37.594Z\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: 12,\n    y: 52,\n    width: 6,\n    height: 2\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21.134,38.906c.094-.051.18-.119.276-.164l.447-.192a3.5,3.5,0,0,1,.549-.175,3.424,3.424,0,0,1,.462-.11,15.6,15.6,0,0,1,.081-3.578,4.84,4.84,0,0,0,.042-.926A5.079,5.079,0,0,0,19,29.151v7.113a5.445,5.445,0,0,1,1.815,2.825C20.919,39.024,21.025,38.965,21.134,38.906Z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.97fcb56e.svg\";\nexport { ForwardRef as ReactComponent };","/*\n  FretPnl.js\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - manage activation of fretboard controls for GuitarJoe app\n\n*/\n\nimport React from 'react'\nimport './FretPnl.css';\nimport q from \"./guitar_lib.js\";\n\nclass FretPnl extends React.Component{\n\n  constructor (props) {\n    super(props)\n    this.buttonClick = this.buttonClick.bind(this)\n    this.fretBtnTextChange = this.fretBtnTextChange.bind(this)\n    this.fretClick = this.fretClick.bind(this)\n    this.fretFltrClick = this.fretFltrClick.bind(this)\n    this.strgFltrClick = this.strgFltrClick.bind(this)\n  }\n  buttonClick( event ){\n    let qry = this.props.qry,\n      btn = event.target\n    if(btn.nodeName !== 'BUTTON'){ \n      btn = btn.parentNode      //span\n      if(btn.nodeName !== 'BUTTON') \n        btn = btn.parentNode    //span span\n    }\n    if(btn.nodeName !== 'BUTTON') return\n    \n\n    if(['fretRoot','selNote'].indexOf( qry.rootType ) >= 0  \n    && ['fretRoot','selNote'].indexOf( btn.dataset.state ) >= 0\n    && qry.scale === null && qry.chord === null && qry.ivl === null){    //nothing to do, turn off fretRoot state\n\t    this.props.stateChange( 'fretRoot', null )\n    } else\n    if(qry.rootType === 'fretSelect' && btn.dataset.state === 'fretSelect'\n    && btn.dataset.tab === qry.fretSelect[0].tab){ //hide button\n        // console.log('buttonClick(): stop fretSelect')\n    \t\tthis.props.stateChange( 'fretSelect', null )\n        return\n    } else\n    if(qry.rootType === 'fretSelect' && this.props.fretSelectFind( btn.dataset.tab ) >= 0){ //this is a selected fret\n      if(qry.fretSelect.length === 2 )    //one selected fret after this hidden, change to fretRoot\n\t\t    this.props.stateChange( 'fretRoot', qry.fretSelect[0] )\n      else    //more than two frets selected, deselect this button\n     \t\tthis.props.stateChange( 'fretSelect', btn.dataset.tab)\n    }\n    else{   //toggle button selected state\n      let selected = Number( btn.dataset.selected )\n      if(selected === 0)\n        btn.dataset.selected = 1\n      else\n      if(selected === 1)\n        btn.dataset.selected = 0\n    }\n    event.stopPropagation()\n  }\n  fretBtnTextChange( event ){   //toggle formatting of fret button captions\n    // console.log('fretBtnTextChange', event)\n    event.stopPropagation()\n    if(this.props.qry.fretBtnText === 'NoteFirst')\n   \t\tthis.props.stateChange( 'fretBtnText', 'IvlFirst' )\n    else\n   \t\tthis.props.stateChange( 'fretBtnText', 'NoteFirst' )\n  }\n  fretClick( event ){\n    let qry = this.props.qry,\n      cell = event.target,\n      strN = Number(cell.dataset.strn), \n      fret = Number(cell.dataset.fret)\n\n    if( isNaN(strN) ){\n      console.log('FretPnl.fretClick() error, bad caller:', cell)\n      return \n    }\n    event.stopPropagation()\n    if(cell.dataset.fretfilter === \"true\")\n      return\n\n    if(strN === 7){\n      strN = 6\n    }else\n    if(strN !== 1 && cell.nodeName === 'TD'){ //calc string to use\n      let  cy = event.clientY,\n        abs = cell.getBoundingClientRect(),\n        top = abs.top,\n        mid = top +(cell.offsetHeight  /2)\n\n      if(cy < mid) strN--\n    }\n\n    if(this.props.strgFltr( strN ) === true)\n      return\n\n    // console.log('fretPnl.fretClick:', strN, fret, cell.className)\n    let note = q.notes.obj( strN, fret )\n    let btn = document.querySelector('.fretButton[data-tab=' +note.tab +']')\n    if(btn !== null){\n      event.target = btn\n      this.buttonClick( event )\n      return\n    } else\n    if(['','selNote'].indexOf(qry.rootType) >= 0){\n\t\t  this.props.stateChange( 'fretRoot', note )\n    }else\n    if(qry.rootType === 'fretRoot'){\n\t\t  this.props.stateChange( 'fretSelect', [qry.root, note] )\n    }else\n    if(qry.rootType === 'fretSelect'){\n\t    this.props.stateChange( 'fretSelect', note )\n    }\n  }\n  fretFltrClick( event ){ //toggle state for frets\n    let // qry = this.props.qry,\n      btn = event.currentTarget,\n      fret = Number( btn.dataset.fret )\n\n    event.stopPropagation()\n    // console.log( 'fretFltrClick:', fret, qry.fretFilter )\n    this.props.stateChange( 'fretFilter', fret )\n  }\n  strgFltrClick( event ){\n    let btn = event.currentTarget,\n      strN = btn.dataset.strn,\n      newstate = !this.props.strgFltr( strN )\n    this.props.stateChange( 'strgFltr'+strN, newstate )\n    event.stopPropagation()\n  }  \n\n  button( nobj, root ){\n    // sample:\n    // <button title='Note' className='fretButton'>C\n    //   <sub title='octave'>4</sub>\n    //   <sup title='Interval'>P1</sup>\n    // </button>\n    let qry = this.props.qry, ivl = nobj.ivl, capStyle = qry.fretBtnText\n\n    let btnState = '', selected = 0\n    if(root === 'ALL'){   //user selected All Notes\n      if(qry.octave !== 0 && qry.octave !== nobj.octave)\n        return null      \n      capStyle = 'NoteFirst' //force for this selection\n    }else\n    if(qry.rootType === 'fretRoot'){\n      if(nobj.notes.indexOf( root.note ) >= 0  &&  nobj.semis === root.semis){\n        btnState = qry.rootType\n      }\n    }else\n    if(qry.rootType === 'selNote'){\n      if(root.notes.indexOf( nobj.note ) >= 0){ \n        btnState = qry.rootType\n      }\n    }else\n    if(qry.rootType === 'fretSelect'){\n      // if(nobj.ivl.abr === 'P1' && nobj.tab === qry.fretSelect[0].tab){\n      if(nobj.tab === qry.fretSelect[0].tab){\n        btnState = qry.rootType\n      }else\n      if(nobj.fsmatch)\n        btnState = 'fretSelectMatch'\n    }\n \n    //test against props.noteFilter -- allow overriding roottype because user selected\n    if(qry.noteFilter.indexOf( nobj.note ) >= 0){\n      btnState = 'noteFilter'\n    }\n    \n    //test against props.tabFilter\n    // if(selected === 0){}\n    \n    //format button caption\n    let btncaption = [], key=0\n    if(capStyle === 'IvlFirst'){\n      if(nobj.ivl){\n        btncaption.push(\n          <span key={++key} className='spanIvl' onClick={this.buttonClick} >\n            <span key={++key} onClick={this.buttonClick} >{ivl.abr.substr(0,1)}</span>\n            {ivl.abr.substr(1)}\n          </span>\n        )\n      }\n      btncaption.push(\n        <sub key={++key} className='subNote' onClick={this.fretBtnTextChange}>{nobj.note}\n            <sub key={++key} className='subOctave' >{nobj.octave}</sub>\n        </sub>\n      )\n    } else {\n    // if(capStyle === 'NoteFirst'){\n      btncaption.push(\n        <span key={++key} className='spanNote'  onClick={this.buttonClick} >{nobj.note}\n            <sub key={++key} className='subOctave' onClick={this.buttonClick} >{nobj.octave}</sub>\n        </span>\n      )\n      if(nobj.ivl){\n        btncaption.push(\n          <sub key={++key} className='subInterval' onClick={this.fretBtnTextChange} >{ivl.abr}</sub>\n        )\n      }\n    }\n \n    return(\n      <button key={++key} className='fretButton'  onClick={this.buttonClick}\n        data-strn={nobj.strgnum} data-fret={nobj.fret} data-tab={nobj.tab} \n        data-state={btnState} data-selected={selected}\n      >\n        {btncaption}\n      </button>\n    )  \n  }\n  render(){\n    let qq = this,\n      qry = this.props.qry\n    // console.log('fretPnl.render()', this.props)\n\n    function local_rootFind( nobj ){    //select fret = selected fret\n      if(qry.rootType !== 'fretRoot') return null\n\n      // if(nobj.fret === qry.root.fret && nobj.strgnum === qry.root.strgnum){\n      if(nobj.tab === qry.root.tab){\n        return qq.button( nobj, qry.root  )\n      }\n      return null\n    }\n    function local_noteFind( nobj ){    //select all frets with note = selNoteVal\n      if(qry.rootType !== 'selNote') return null\n\n      let idx = nobj.notes.indexOf(qry.note)\n      if(qry.note === '' ||  idx >= 0){\n        if(qry.octave === 0 || qry.octave === nobj.octave){\n          if(qry.note !== '')\n            nobj.note = qry.note\n          return qq.button( nobj, qry.root  )\n      }  }\n      return null\n    }\n    function local_fretSelectFind( nobj ){\n      if(qry.rootType !== 'fretSelect') return null\n      if(qry.fretSelect.length === 0) return null\n\n      for(let fso of qry.fretSelect){\n        if(nobj.tab === fso.tab){\n          if(qry.octave === 0 || qry.octave === nobj.octave){\n            nobj.ivl = fso.ivl\n            nobj.note = fso.note\n            return qq.button( nobj, qry.root )\n          }\n        }\n      }\n      return null\n    }\n    function local_fretSelectMatchFind( nobj ){\n      if(qry.rootType !== 'fretSelect') return null\n      if(qry.fretSelectMatch === null) return null\n\n      for(let ivl of qry.fretSelectMatch.obj.ivls){\n        if(nobj.notes.indexOf( ivl.note ) >= 0){\n          if(qry.octave === 0 || qry.octave === nobj.octave){\n            nobj.ivl = ivl\n            nobj.note = ivl.note\n            if(qq.props.fretSelectFind( nobj.tab ) < 0)\n              nobj.fsmatch = true\n            return qq.button( nobj, qry.root )\n          }\n        }\n      }\n      return null\n    }\n\n    function local_octaveFind(nobj){  //find notes for selected octave\n      if(qry.note !== '') return\n\n      if(qry.octave === nobj.octave){\n        nobj.ivl = qry.ivl\n        return qq.button( nobj, qry.root  )\n      }\n      return null\n    }\n    function local_scaleFind( nobj ){\n      if(qry.scale === null) return null\n\n      if(qry.rootType === 'fretRoot'){    //exclude frets\n        if(q.fretboard.fretInRange(nobj, qry.root) !== true)\n          return null\n      }\n      for(let ivl of qry.scale.ivls){\n        if( nobj.notes.indexOf(ivl.note) >= 0){\n          if(qry.octave === 0 || qry.octave === nobj.octave){\n            nobj.ivl = ivl\n            nobj.note = ivl.note\n            return qq.button( nobj, qry.root )\n          }\n        }\n      }\n      return null\n    }\n    function local_chordFind( nobj ){\n      if(qry.chord === null) return null\n      if(qry.rootType === 'fretRoot'){    //exclude frets\n        if(q.fretboard.fretInRange(nobj, qry.root) !== true)\n          return null\n      }\n      for(let ivl of qry.chord.ivls){\n        if( nobj.notes.indexOf(ivl.note) >= 0){\n          if(qry.octave === 0 || qry.octave === nobj.octave){\n            nobj.ivl = ivl\n            nobj.note = ivl.note\n            return qq.button( nobj, qry.root )\n          }\n        }\n      }\n      return null\n    }\n    function local_ivlFind( nobj ){     //select frets matching interval\n      if(qry.ivl === null) return null\n      \n      let btn = null\n      if( (qry.rootType === 'fretRoot' && nobj.tab === qry.root.tab)\n      ||  (qry.rootType === 'selNote' && nobj.notes.indexOf(qry.note) >= 0) ){ //this is the root note object\n        btn = 'root'\n      } else\n      if(qry.rootType === 'fretRoot' && q.fretboard.fretInRange(nobj, qry.root, 4) === true){\n        if( nobj.notes.indexOf(qry.ivl.note) >= 0 )\n          btn = true\n      }else\n      if(qry.rootType === 'selNote' && nobj.notes.indexOf(qry.ivl.note) >= 0){\n        btn = true\n      }\n\n      if(btn === 'root'){\n        nobj.ivl = q.intervals.byName('P1')\n        nobj.note = qry.note\n        btn = qq.button( nobj, qry.root  )\n      }else\n      if(btn === true && (qry.octave === 0 || qry.octave === nobj.octave)){\n        nobj.ivl = qry.ivl\n        nobj.note = qry.ivl.note\n        btn =  qq.button( nobj, qry.root  )\n      }\n      return btn\n    }\n\n    //make table's tr and td\n    let trArray = [],\n      fretMax = q.fretboard.fretMax,    \n      first = this.props.fretFirst,\n      last = this.props.fretLast,\n      ss = ''\n    for (let row = 1; row <= 9; row++) {\n      let frets = []\n      let strN = row -1\n      let strgFltr = this.props.strgFltr( strN )\n\n      for (let col = 0; col <= fretMax +1; col++) {\n        let tab = '',\n          fretFltr = (qry.fretFilter.indexOf( col ) >= 0)\n\n        let btnStrFltr = null    //create string filter button for fret0 and fretMax\n        if(col === 0 && strN >= 1 && strN <= 6){\n          btnStrFltr=(<div onClick={this.strgFltrClick} data-strn={strN}\n            className={'btnFilter btnStrgFltr btnStrgFltr'+strN}\n           ><div>&diams;</div></div>\n           )\n        }\n\n        if(row === 1){  //top border, fret filter disabled because may not be needed\n          let cls = (col === (fretMax +1) ?'borderRight tdBorder'+col :'tdBorder'+col)\n          let ss = (col === first || col === (fretMax +1) ?' ' :col)\n          if(ss === col && qry.collapsed === true){\n            if([5,7,9,12].indexOf(col) >= 0)\n              ss = <div data-fret={col} className='collapsed' >&nbsp;</div>\n            else\n              ss = ''\n          }\n          frets.push( <td key={col} \n            data-fret={col} data-fretfilter={fretFltr}\n            onMouseDown={this.fretFltrClick} className={cls}>{ss}</td> \n          )\n        }else\n        if(row === 9){  //bottom frame\n\n          if(col === (fretMax +1))    //right bottom corner frame\n            frets.push( <td key={col} className={'borderRight tdBottom col'+col}></td> )\n          else {      //bottom fret frame\n            frets.push(<td key={col} className={'tdBottom col'+col}></td>)\n           }\n\n        }else{   // generate frets with right and left borders\n\n          if(col === fretMax +1){   // right border\n            frets.push( <td key={col} data-strn={strN} data-col={col} className={'borderRight col'+col}></td> )\n          } \n          else{ //fretboard cells\n            let btn = null, stringdiv = null\n\n            if(strN >= 1 && strN <= 6)\n              stringdiv = <div className='stringdiv' onClick={this.fretClick} data-strn={strN} data-fret={col} ></div>\n\n            //process fret button\n            if( fretFltr === false    //no filter applied to fret\n             && strgFltr === false    //no filter applied to string\n             && col >= first \n             && col <= last){         //filter by fretboard range\n              let nobj = q.notes.obj( strN, col )\n              tab = nobj.tab\n\n              if(qry.rootType === 'selNote' && this.props.selNoteVal === 'All'){\n                btn = qq.button( nobj, 'ALL' )  //no root when showimg all notes\n              }\n              else {\n                btn = local_scaleFind( nobj )\n                if(btn === null) btn = local_fretSelectMatchFind( nobj )\n                if(btn === null) btn = local_fretSelectFind( nobj )\n                if(btn === null) btn = local_chordFind( nobj )\n                if(btn === null) btn = local_ivlFind( nobj )\n                if(btn === null){\n                  if(qry.rootType === 'fretRoot')\n                    btn = local_rootFind( nobj )  //only select the fret clicked\n                  else\n                  if(qry.rootType === 'selNote')\n                    btn = local_noteFind( nobj )  //select all frets with note = selNoteVal\n                }\n                if(btn === null) btn = local_octaveFind( nobj )\n              }\n            }  \n\n            frets.push(<td key={col} className={'fret fret'+col} onClick={this.fretClick} \n              data-strn={strN} data-fret={col} data-tab={tab} data-fretfilter={fretFltr} >\n              {btnStrFltr}\n              {btn}\n              {stringdiv}\n              <div className='fretbar' onClick={this.fretClick} data-strn={strN} data-fret={col} ></div>\n            </td>)\n           }\n        }\n      }\n\n      if(row === 1) \n        ss = 'frame frameTop'\n      else\n      if(row === 8) \n        ss = 'borderBottom'\n      else\n      if(row === 9) \n        ss = 'frame frameBottom'\n      else{\n        ss = 'strg strg' +(row -1)\n      }\n      trArray.push( <tr key={row} className={ss} data-fltr={strgFltr}>{frets}</tr> )\n    }\n    return (\n      <div className='fretPnlContainer'>\n        <table className='fretPnl'><tbody>\n          {trArray}\n        </tbody></table>\n      </div>\n    )\n  }\n}\n\nexport default FretPnl\n","/*\n  QueryPnl.js\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - manage query controls for GuitarJoe app\n\n*/\nimport React from 'react'\nimport q from \"./guitar_lib.js\"\n\n\nclass QueryPnl extends React.Component {\n\n  constructor(props){\n    super(props)\n\n    this.btnDupeClick = this.btnDupeClick.bind(this)\n    this.btnDelClick = this.btnDelClick.bind(this)\n\n    this.last = {}    //store last query params before reset via label.click\n    this.selLabelClick = this.selLabelClick.bind(this)\n\n    this.selChordChange = this.selChordChange.bind(this)\n    this.btnClearClick = this.btnClearClick.bind(this)\n    this.btnCollapseClick = this.btnCollapseClick.bind(this)\n    // this.selFretNoChange = this.selFretNoChange.bind(this)\n    this.selIntervalChange = this.selIntervalChange.bind(this)\n    this.selNoteChange = this.selNoteChange.bind(this)\n    this.selOctaveChange = this.selOctaveChange.bind(this)\n    this.selScaleChange = this.selScaleChange.bind(this)\n    this.fsChordClick = this.fsChordClick.bind(this)\n    this.fsScaleClick = this.fsScaleClick.bind(this)\n    this.infoNoteClick = this.infoNoteClick.bind(this)\n  }\n\n  //event handlers\n  btnDelClick(){\n    this.props.remove()\n  }\n  btnDupeClick(){\n    this.props.duplicate()\n  }\n  btnCollapseClick(){\n    let val = !this.props.qry.collapsed\n    this.props.stateChange( 'collapsed', val )\n  }\n  btnClearClick(){\n    // this.props.dispatch({ type:\"FretboardActions/fretFirstUpdate\", payload:'' })\n    this.props.reset()\n  }\n  fsChordClick( event ){\n    let btn = event.target, qry = this.props.qry\n    // console.log('fsChordClick', btn.dataset.note, btn.dataset.abr)\n\n    if(btn.dataset.selected === 'label'){    //user clicked the label\n      this.props.stateChange( 'fretSelectMatch', null )\n      this.props.stateChange( 'noteFilter', 'clear' )\n    }\n    else{   //default operation\n      if(qry.fretSelectMatch != null\n      && qry.fretSelectMatch.note === btn.dataset.note && qry.fretSelectMatch.abr === btn.dataset.abr)    //turn off selected match\n        this.props.stateChange( 'fretSelectMatch', null )\n      else\n        this.props.stateChange( 'fretSelectMatch', {type:'chord', note:btn.dataset.note, abr:btn.dataset.abr} )\n    }\n  }\n  fsScaleClick( event ){\n    let btn = event.target, qry = this.props.qry\n    // console.log('fsScaleClick', btn.dataset.note, btn.dataset.abr)\n\n    if(btn.dataset.selected === 'label'){    //user clicked the label\n      this.props.stateChange( 'fretSelectMatch', null )   //turn off selected match\n      this.props.stateChange( 'noteFilter', 'clear' )\n    }\n    else{   //default operation\n      if(qry.fretSelectMatch != null \n      && qry.fretSelectMatch.note === btn.dataset.note && qry.fretSelectMatch.abr === btn.dataset.abr)\n        this.props.stateChange( 'fretSelectMatch', null )   //turn off selected match\n      else\n        this.props.stateChange( 'fretSelectMatch', {type:'scale', note:btn.dataset.note, abr:btn.dataset.abr} )\n    }\n  }\n  \n  infoNoteClick(event){\n    event.stopPropagation()\n\n    let btn = event.target   \n    if(btn.dataset.selected === 'label'){    //user clicked the label\n      this.props.stateChange( 'fretSelectMatch', null )\n      this.props.stateChange( 'noteFilter', 'clear' )\n    }\n    else {   //default operation\n      if(btn.className !== 'ivl')\n        btn = btn.parentNode\n      \n      let note = btn.dataset.note     \n      // console.log('infoNoteClick', btn, note)\n      if(typeof note === 'string')\n        this.props.stateChange( 'noteFilter', note )\n        // this.props.stateChange( 'noteFilter', note, btn.className )\n    }\n  }\n  selLabelClick( event ){     //reset param to off value\n    let qry = this.props.qry,\n      lbl = event.target,\n      val = lbl.dataset.selected\n    // console.log('last', this.last)\n    if(val === 'true'){\n      if(lbl.dataset.type === 'note'){\n        if(qry.rootType === '') return\n        \n        this.last['rootType'] = qry.rootType\n        this.last['root'] = qry.root\n        if(this.last['rootType'] === 'selNote')\n          this.props.stateChange( 'selNoteVal', '' )\n        if(this.last['rootType'] === 'fretRoot')\n          this.props.stateChange( 'fretRoot', null )\n      }else\n      if(lbl.dataset.type === 'chord'){\n        if(qry.chord === null) return\n        this.last['chordName'] = qry.chord.name\n        this.props.stateChange( 'chordName', '' )\n      }else\n      if(lbl.dataset.type === 'scale'){\n        if(qry.scale === null) return\n        this.last['scaleName'] = qry.scale.name\n        this.props.stateChange( 'scaleName', '' )\n      }else\n      if(lbl.dataset.type === 'octave'){\n        this.last['octave'] = qry.octave\n        this.props.stateChange( 'octave', 0 )\n      }else\n      if(lbl.dataset.type === 'ivlName'){\n        this.last['ivlName'] = this.props.ivlName\n        this.props.stateChange( 'ivlName', '' )\n      }\n    }\n    else{   //allow toggling param on and off\n      if(lbl.dataset.type === 'note'){\n        if( !this.last.rootType ) return\n        if(this.last.rootType === 'selNote'){\n          if(this.last['root'] !== null)\n            this.props.stateChange( 'selNoteVal', this.last['root'].note )\n        } else\n        if(this.last.rootType === 'fretRoot'){\n          if(this.last['root'] !== null)\n            this.props.stateChange( 'fretRoot', this.last['root'] )\n        }\n      }else\n      if(lbl.dataset.type === 'chord'){\n        if(this.last['chordName'] && this.last['chordName'] !== '')\n          this.props.stateChange( 'chordName', this.last['chordName'] )\n      }else\n      if(lbl.dataset.type === 'scale'){\n        if(this.last['scaleName'] && this.last['scaleName'] !== '')\n          this.props.stateChange( 'scaleName', this.last['scaleName'] )\n      }else\n      if(lbl.dataset.type === 'octave'){\n        if(this.last['octave'] && this.last['octave'] !== '')\n          this.props.stateChange( 'octave', this.last['octave'] )\n      }else\n      if(lbl.dataset.type === 'ivlName'){\n        if(this.last['ivlName'] && this.last['ivlName'] !== '')\n          this.props.stateChange( 'ivlName', this.last['ivlName'] )\n      }\n    }\n  }\n  selNoteChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text\n    this.props.stateChange( 'selNoteVal', val )\n    //   this.props.dispatch({ type:\"FretboardActions/semisUpdate\", val })\n  }\n  selOctaveChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text\n    if(val === '')\n      this.props.stateChange( 'octave', 0 )\n    else\n      this.props.stateChange( 'octave', Number(val) )\n  }\n  selIntervalChange( event ){\n    let sel = event.target,\n      opt = sel.options[sel.selectedIndex],\n      abr = opt.dataset.abr\n    this.props.stateChange( 'ivlName', abr )\n  }\n  selChordChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text\n    this.props.stateChange( 'chordName', val )\n  }\n  selScaleChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text\n    this.props.stateChange( 'scaleName', val )\n  }\n\n  // draw controls\n  drawSelNote(){\n    let qry = this.props.qry,\n      list = [<option key='' ></option>,<option key='999' >All</option>]\n    for(let ii=0; ii < q.notes.list.length; ii++){\n      let note = q.notes.list[ii]\n      list.push(<option key={ii} >{note}</option>)\n    }\n\n    let note = (qry.note === null ?'' :qry.note)\n    return (\n      <div className='dataPnl pnlNote'>\n        <label data-selected={note !== ''} data-type='note' onClick={this.selLabelClick} >Note</label>\n        <select value={note} className='selNote' onChange={this.selNoteChange} >{list}</select>\n      </div>\n    )\n  }\n  drawSelOctave(){\n    let qry = this.props.qry,\n      oct = qry.octave,\n      omin = 0, omax = 0,\n      list = [<option key={999} ></option>]\n\n    omin = q.notes.obj(6, 0).octave\n    omax = q.notes.obj(1, q.fretboard.fretMax).octave\n\n    for(let ii = omax; ii >= omin; ii--){\n      list.push(<option key={ii} >{ii}</option>)\n    }\n    return (\n      <div className='dataPnl pnlOctave'>\n        <label data-selected={oct !== 0} data-type='octave' onClick={this.selLabelClick} >Octave</label>\n        <select value={oct} className='selOctave' onChange={this.selOctaveChange}>\n           {list}\n        </select>      \n      </div>\n    )\n  }\n  drawSelScale(){\n    let selected = this.props.scaleName,\n      ii=0, list = [<option key='aaa'></option>]\n    for(let scale of q.scales.list){\n      list.push(<option key={++ii} >{scale.name}</option>)\n    }\n    return (\n      <div className='dataPnl pnlScale'>\n        <label data-selected={selected !== ''} data-type='scale' onClick={this.selLabelClick} >Scale</label>\n        <select value={selected} className='selScale' onChange={this.selScaleChange} >\n          {list}\n        </select>      \n      </div>\n    )\n  }\n  drawSelChord(){\n    let ii = 0,\n      selected = this.props.chordName, \n      list = [<option key='aaa'></option>]\n    for(let chd of q.chords.list){\n      list.push(<option key={++ii} >{chd.name}</option>)\n    }\n    return (\n      <div className='dataPnl pnlChord'>\n        <label data-selected={selected !== ''} data-type='chord' onClick={this.selLabelClick} >Chord</label>\n        <select value={selected} className='selChord' onChange={this.selChordChange} >\n          {list}\n        </select>      \n      </div>\n    )\n  }\n  drawSelInterval(){\n    let qry = this.props.qry,\n      list = [<option key='aaa' ></option>],\n      ii = 0, selected = '' //, last = ''\n    for(let ivl of q.intervals.list){\n      if(ivl.semis === 0) continue\n      if(ivl.semis === 12) continue\n      // if(ivl.abr === last) continue  should be unique\n      let html = `${ivl.name} (${ivl.abr}, ${ivl.semis})`\n      list.push(<option key={++ii} data-abr={ivl.abr} >{html}</option>)\n      if(qry.ivl !== null && selected === '' && qry.ivl.abr === ivl.abr)\n        selected = html\n      // last = ivl.abr\n    }\n    return (\n      <div className='dataPnl pnlInterval'>\n        <label data-selected={selected !== ''} data-type='ivlName' onClick={this.selLabelClick} >Interval</label>\n        <select value={selected} className='selInterval' title='Intervals sorted by semis-tones'\n          onChange={this.selIntervalChange} \n        >\n          {list}\n        </select>      \n      </div>\n    )\n  }  \n  drawFretSelectMatches( html, key ){    //push matching chords and scales onto html[]\n    let qry = this.props.qry, selected = 0\n    \n    if(qry.fretSelect.length < 2) return null  \n\n    let noblist = qry.fretSelect.slice()\n    let last = null\n    noblist = noblist.filter(function(a){   //filter duplicate notes\n      if(last != null && last.notes.indexOf( a.note ) >= 0) return null\n      last = a\n      return a\n    })\n\n    //test chords for matching notes\n    let list = []\n    let lastkey = key\n    let lastname = null\n    last = null\n    for(let chord of q.chords.list){    \n\n      for(let iobj of q.intervals.list){  //iterate notes\n        if(last != null && last.semis === iobj.semis) continue\n        if(iobj.semis === 12) continue    //skip octave\n        last = iobj\n\n        let ivls = q.chords.obj( iobj.note, chord.name).ivls    \n  \t\t  let result = q.notes.match( ivls, noblist)\n\n       if(result === true)\n         list.push( {note:iobj.note, chord:chord} )\n      }\n    }\n\n    for(let ob of list){    //write matching chords\n      let chord = ob.chord\n\n      if(lastkey === key){\n        html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        html.push( <span key={++key} className='propName'\n          data-selected='label' onClick={this.fsChordClick}\n        >Matching chords:&nbsp;</span> )\n      }\n\n      selected = 0\n      if(qry.fretSelectMatch != null\n      && qry.fretSelectMatch.note === ob.note\n      && qry.fretSelectMatch.abr === chord.abr) selected = 'fretSelectMatch'\n\n      if(lastname !== null && lastname !== chord.name)\n        html.push( <i key={++key} > &mdash; </i> )\n      lastname = chord.name\n\n      html.push( \n        <span key={++key} className='ivl' onClick={this.fsChordClick} title={ob.note +' ' +chord.name}\n        data-note={ob.note} data-abr={chord.abr} data-selected={selected} \n        >&#8200;{ob.note}&#8239;{chord.abr}&#8200;</span> \n      )\n    }\n\n    //test scales for matching notes\n    list = []\n    lastkey = key\n    lastname = null\n    last = null\n    // for(let scale of q.scales.list){   ==> disabled because most scales are not necessary for this use\n    for(let scaleName of ['Major','Minor','Pen.Maj','Pen.min','Blues7','Blues6' /*,'Dbl.Hrm'*/]){\n      //can optimize by caching related minor scales when major found: \n      // Major:Nat.min; Pent Maj:Pen.min,Blues7,Blues6; Dbl.Hrm:Gypsy\n      for(let iobj of q.intervals.list){  //iterate notes\n        if(last != null && last.semis === iobj.semis) continue\n        if(iobj.semis === 12) continue    //skip octave\n        last = iobj\n\n        // let ivls = q.scales.obj( iobj.note, scale.name).ivls    \n        let scale = q.scales.obj( iobj.note, scaleName )\n        let ivls = scale.ivls    \n  \t\t  let result = q.notes.match( ivls, noblist)\n\n       if(result === true) \n         list.push( {note:iobj.note, scale:scale} )\n      }\n    }\n\n    for(let ob of list){    //write matching scales\n      selected = 0\n      let scale = ob.scale\n\n      if(lastkey === key){\n        html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        html.push( <span key={++key} className='propName'\n          data-selected='label' onClick={this.fsScaleClick}\n        >Matching scales:&nbsp;</span> )\n      }\n\n      if(qry.fretSelectMatch != null\n      && qry.fretSelectMatch.note === ob.note\n      && qry.fretSelectMatch.abr === scale.abr) selected = 'fretSelectMatch'\n\n      if(lastname !== null && lastname !== scale.name)\n        html.push( <i key={++key} > &mdash; </i> )\n      lastname = scale.name\n\n      html.push( \n        <span key={++key} className='ivl' onClick={this.fsScaleClick} title={ob.note +' ' +scale.name}\n        data-note={ob.note} data-abr={scale.abr} data-selected={selected} \n        > &#8200;{ob.note}&#8239;{scale.short}&#8200;</span> \n      )\n    }\n\n    return key\n  }\n  drawInfo( collapsed ){\n    let qry = this.props.qry,  selected = 0\n    // console.log('queryPnl.drawInfo', qry)\n    // arrow = null,\n    // if(collapsed === 'qryCollapsed')\n    //   arrow = (<div className='qryBtn qryBtnExpand' onClick={this.btnCollapseClick} title=\"Show query panel\" > <div>&#10148;</div> </div>)\n\n    let html = [], key=0, lastkey=null\n    if(qry.rootType === 'fretSelect'){    \n\n        // console.log('qry.fretSelect', qry.fretSelect)\n\n        html.push( <span key={++key} className='propName'\n           data-selected='label' onClick={this.infoNoteClick}\n          >Fret select:&nbsp;</span> )\n        let last = null\n        qry.fretSelect.forEach( nobj => {\n          if(last && last.note === nobj.note) return\n\n          if(qry.noteFilter.indexOf( nobj.note ) >= 0) selected = 'noteFilter'\n          else selected = 0\n          \n          html.push( <span key={++key} className='ivl'\n            onClick={this.infoNoteClick} data-note={nobj.note} data-selected={selected}\n          >&nbsp;{nobj.note} <sub>{nobj.ivl.abr}</sub> </span> )\n          last = nobj\n        })\n\n        if(qry.fretSelectMatch != null){    //draw user select chord or scale match\n          html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n           html.push( <span key={++key} className='propName'\n           data-selected='label' onClick={this.infoNoteClick}\n          >Selected, {qry.fretSelectMatch.obj.fullName}:&nbsp;</span> )\n\n          for(let ivl of qry.fretSelectMatch.obj.ivls){   \n            if(qry.noteFilter.indexOf( ivl.note ) >= 0) selected = 'noteFilter'\n            else selected = 0\n\n            html.push( <span key={++key} className='ivl' onClick={this.infoNoteClick}\n              data-note={ivl.note} data-selected={selected}\n            >&nbsp;{ivl.note} <sub>{ivl.abr}</sub> </span> )\n          }\n        }\n\n      if(collapsed !== 'qryCollapsed'){\n        key = this.drawFretSelectMatches( html, key )\n      }\n    } else\n    if(qry.rootType === 'selNote' && this.props.selNoteVal === 'All'){    //special case\n      html.push( <span key={++key} className='propName'\n         data-selected='label' onClick={this.infoNoteClick}\n        >{'All Notes'}</span> )\n      if(qry.octave !== 0){\n        html.push( <span key={++key} className='ivl'>{': Octave '}{qry.octave} </span> )\n      }\n    }\n    else{   //draw scale, chord and interval labels and notes\n      lastkey = key\n      if(qry.scale !== null){\n        // html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        html.push( <span key={++key} className='propName'\n           data-selected='label' onClick={this.infoNoteClick}\n          >{qry.root.note +' ' +qry.scale.name +':'}</span> )\n        qry.scale.ivls.forEach( ivl => {\n          if(qry.noteFilter.indexOf( ivl.note ) >= 0) selected = 'noteFilter'\n          else selected = 0\n          \n          html.push( <span key={++key} className='ivl'\n            onClick={this.infoNoteClick} data-note={ivl.note} data-selected={selected}\n          >&nbsp;{ivl.note} <sub>{ivl.abr}</sub> </span> )\n        })\n      }\n      if(qry.chord !== null){\n        if(lastkey !== key)\n          html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        html.push( <span key={++key} className='propName'\n           data-selected='label' onClick={this.infoNoteClick}\n          >{qry.root.note +' ' +qry.chord.name +':'}</span> )\n        qry.chord.ivls.forEach( ivl => {\n          if(qry.noteFilter.indexOf( ivl.note ) >= 0) selected = 'noteFilter'\n          else selected = 0\n\n          html.push( <span key={++key} className='ivl'\n            onClick={this.infoNoteClick} data-note={ivl.note} data-selected={selected}\n           >&nbsp;{ivl.note} <sub>{ivl.abr}</sub> </span> )\n        })\n      }\n      if(qry.ivl !== null){\n        if(qry.noteFilter.indexOf( qry.ivl.note ) >= 0) selected = 'noteFilter'\n        else selected = 0\n        \n        if(lastkey !== key)\n          html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        html.push( <span key={++key} className='propName'\n           data-selected='label' onClick={this.infoNoteClick}\n          >{qry.note +' +' +qry.ivl.name +':'}</span> )\n        html.push( <span key={++key} className='ivl'\n          onClick={this.infoNoteClick} data-note={qry.ivl.note} data-selected={selected}\n        >&nbsp;{qry.ivl.note} <sub>{qry.ivl.abr}</sub> </span> )\n      }\n    }\n    \n    if(html.length === 0) return null\n        // {arrow}\n    return (\n      <div className='infoPnl'>\n         <div className='infoDiv'>\n           {html}\n         </div>\n      </div>\n    )      \n  }\n \n  render(){\n    // console.log('queryPnl.render()', this.props)\n    let qry = this.props.qry\n    let collapsed = (qry.collapsed ?'qryCollapsed' :'qryExpanded')\n\n    let selNote = null\n    let selOct = null\n    let selInt = null\n    let selScale = null\n    let selChord = null\n    if(qry.rootType !== 'fretSelect') { //optimization\n      selNote = this.drawSelNote()\n      selOct = this.drawSelOctave()\n      selInt = this.drawSelInterval()\n      selScale = this.drawSelScale()\n      selChord = this.drawSelChord()\n    }\n    let infoPnl = this.drawInfo( collapsed )\n\n    let arrow = null\n    if(collapsed === 'qryCollapsed')\n      arrow = (<div className='qryBtn qryBtnExpand' onClick={this.btnCollapseClick} title=\"Show query panel\" > <div>&#10148;</div> </div>)\n\n    return (\n      <div className={'queryPnl '+collapsed} >\n    <table className='tbQuery' ><tbody><tr><td className='qryBtnsLeft'>\n        {arrow}\n        <div className='qryBtn qryBtnCollapse' onClick={this.btnCollapseClick}\n            title=\"Hide query panel\" >\n          <div>&#10148;</div>\n        </div>\n    </td><td className='qryContent'>\n        <div className='queryControls' data-roottype={qry.rootType}>\n          {selNote}\n          {selOct}\n          {selScale}\n          {selChord}\n          {selInt}\n        </div>\n        {infoPnl}\n    </td><td className='qryBtnsRight'>\n        <div className='qryBtn qryBtnClear' onClick={this.btnClearClick} title='Reset query controls'>&#8635;</div>\n        <div className='qryBtn qryBtnDupe' onClick={this.btnDupeClick} title='Duplicate fretboard' >&#10010;</div>\n        { this.props.fbid === 0 ?null\n          :<div className='qryBtn qryBtnDel' onClick={this.btnDelClick} title='Remove this fretboard' >&#10000;</div>\n        }\n    </td></tr></tbody></table>\n      </div>\n    )\n  }\n}\n\nexport default QueryPnl\n","/*\nFretboard.js\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - top level container for fretboard controls of GuitrJoe app\n  - store shared state for FretPnl.js and QueryPnl.js\n\n*/\n\nimport React from 'react';\nimport './Fretboard.css';\n\nimport FretPnl from \"./FretPnl.js\";\nimport QueryPnl from \"./QueryPnl.js\";\nimport q from \"./guitar_lib.js\";\n\nclass Fretboard extends React.Component{\n\n  constructor (props) {\n    console.log('Fretboard.constructor()', props)\n    super(props)\n    //keep state private to control children\n    this.state = {\n\t\t\tfbid:(props.fbid ?props.fbid :0),\n\t\t\t\n      collapsed:(props.collapsed ?props.collapsed :false),\n      fretFirst:(props.fretFirst ?props.fretFirst :0),\n      fretLast:(props.fretLast ?props.fretLast :q.fretboard.fretMax),\n      fretBtnText:(props.fretBtnText ?props.fretBtnText :'NoteFirst'),    //one of: NoteFirst, IvlFirst\n      fretFilter:(props.fretFilter ?props.fretFilter :[]),      //csv of fretN, if found then disable fret\n      strgFltrList:(props.strgFltrList ?props.strgFltrList :''),    //csv of strN, if found then hide notes\n      noteFilter:(props.noteFilter ?props.noteFilter :[]),    //notes on fetboard where button.data-selected=2; set by clicking infoPnl note\n      fretSelect:(props.fretSelect ?props.fretSelect :[]),    //when rootType=fretSelect, list of frets and related data; set in fretPnl.fretClick()\n      fretSelectMatch:(props.fretSelectMatch ?props.fretSelectMatch :null),    //user selects a chord or scale to view: {type, name}\n\n      rootType:(props.rootType ?props.rootType :''),    //one of: ['', fretRoot, fretSelect, selNote]\n      fretRoot:(props.fretRoot ?props.fretRoot :null),          //note object, set when fret clicked\n      selNoteVal:(props.selNoteVal ?props.selNoteVal :''),   //string, contains note selected in selNote\n      octave:(props.octave ?props.octave :0), \n      scaleName:(props.scaleName ?props.scaleName :''),\n      chordName:(props.chordName ?props.chordName :''),\n      ivlName:(props.ivlName ?props.ivlName :''), \n    }\n    this.duplicate = this.duplicate.bind(this)\n    this.remove = this.remove.bind(this)\n    this.reset = this.reset.bind(this)\n    this.stateChange = this.stateChange.bind(this)\n    this.strgFltr = this.strgFltr.bind(this)\n    this.makeQuery = this.makeQuery.bind(this)\n    this.fretSelectFind = this.fretSelectFind.bind(this)\n  }  \n  reset(){\n    this.setState({ collapsed:false })\n    this.setState({ fretSelectMatch:null })\n    this.setState({ fretSelect:[] })\n    this.setState({ noteFilter:[] })\n    this.setState({ strgFltrList:'' })\n    this.setState({ fretFilter:[] })\n    this.setState({ scaleName:'' })\n    this.setState({ chordName:'' })\n    this.setState({ rootType:'' })\n    this.setState({ ivlName:'' })\n    this.setState({ fretRoot:null })\n    this.setState({ selNoteVal:'' })\n    this.setState({ octave:0 })\n    this.setState({ fretBtnText:'NoteFirst' })\n  }\n  strgFltr( strN ){   //return strgFltrList[n -1] (true/false) or null\n    strN = Number(strN)\n    if(strN < 1 || strN > 6) return null\n    return ( this.state.strgFltrList.indexOf( strN+',' ) >= 0 )\n  }\n  remove(){\n    this.props.remove( this )\n  }\n  duplicate(){\n    this.props.duplicate( this )\n  }\n  fretSelectFind( objOrTab ){\n    let list = this.state.fretSelect,\n      fnd = -1\n\n    if(list.length === 0 || objOrTab === null) return fnd  //empty list\n\n    let  tab = (typeof objOrTab === 'string' ?objOrTab :objOrTab.tab)    //find in list\n    for(let ii = 0; ii < list.length; ii++){\n      if(tab === list[ii].tab){\n        fnd = ii\n        break\n      }\n    }\n    return fnd\n  }\n  stateChange( key, val){\n    // if(key === 'rootType')   //only manually set below; can be prop instead of state\n    //   this.setState({ rootType:val })\n    // else\n    if(key === 'collapsed'){\n      this.setState({ collapsed:val })\n    }else\n    if(key === 'noteFilter'){\n\n      if(val === 'clear'){  //empty list\n        this.setState({ noteFilter:[] })\n      }\n      else {    //default operation\n        let list = this.state.noteFilter.slice()\n        let idx = list.indexOf( val )\n   \n        if(idx < 0) list.push( val )\n        else list.splice( idx, 1 )\n        \n        this.setState({ noteFilter:list })\n      }\n    }else\n    if(key === 'fretBtnText'){\n      this.setState({ fretBtnText:val })\n    }else\n    if(key === 'fretFilter'){\n      let list = this.state.fretFilter.slice()\n      let idx = list.indexOf( val )\n \n      if(idx < 0) list.push( val )\n      else list.splice( idx, 1 )\n\n      this.setState({ fretFilter:list })\n      // let fval = `\"${val}\",`,\n      //   ii = this.state.fretFilter.indexOf( fval )\n      // if(ii < 0)   //add to list\n      //   val = this.state.fretFilter +fval    \n      // else         //remove from list\n      //   val = this.state.fretFilter.replace(fval, '')\n      // this.setState({ fretFilter:val })\n    }else\n    if(key === 'fretRoot'){\n      this.setState({ fretRoot:val })\n\n      if(val === null)\n         this.setState({ rootType:'' })\n      else\n        this.setState({ rootType:'fretRoot' })\n      this.setState({ selNoteVal:'' })\n      this.setState({ fretSelect:[] })\n      this.setState({ fretSelectMatch:null })\n    }else\n    if(key === 'selNoteVal'){\n      this.setState({ selNoteVal:val })\n\n      if(val === '')\n        this.setState({ rootType:'' })\n      else\n        this.setState({ rootType:'selNote' })\n      this.setState({ fretRoot:null })\n      this.setState({ fretSelect:[] })\n      this.setState({ fretSelectMatch:null })\n    }else\n    if(key === 'fretSelect'){\n\n      if(val === null){   //disable fretSelect mode\n        this.setState({ fretSelect:[] })\n        this.setState({ fretSelectMatch:null })\n        this.setState({ rootType:'' })\n        this.setState({ fretRoot:null })\n        this.setState({ selNoteVal:'' })\n        return\n      }\n\n      if(Array.isArray(val) === false)  //process as array due to React state handling\n        val = [val]\n\n      let list = this.state.fretSelect.slice(),\n        idx = null, root=null\n\n      for(let nobj of val){\n        idx = this.fretSelectFind( nobj )\n        if(idx < 0) {\n          if(list.length === 0){\n            nobj.ivl = q.intervals.byName( 'P1' )\n            list.push( nobj )\n          }\n          else{\n            if(root === null) root = list[0]\n            let semis = (nobj.semis -root.semis) % 12\n            if(semis < 12) semis = 12 +semis\n            nobj.ivl = q.intervals.bySemis( semis, true )\n            list.push( nobj )\n          }\n        }else \n          list.splice( idx, 1 )\n      }\n      list.sort(function (a, b) {\n        return a.ivl.semis - b.ivl.semis\n      })\n\n      this.setState({ fretSelect:list })\n      if(this.state.rootType !== 'fretSelect'){   //set rootType to fretSelect\n        this.setState({ rootType:'fretSelect' })\n        this.setState({ fretRoot:null })\n        this.setState({ selNoteVal:'' })\n      }\n    }else\n    if(key === 'fretSelectMatch'){\n      this.setState({ fretSelectMatch:val })\n    }else\n    if(key.substr(0,8) === 'strgFltr'){\n      let strN = Number(key.substr(8,1)),\n        flt = this.state.strgFltrList.slice()\n\n      // console.log('stateChange:', key, val, flt)\n      if(strN < 1 || strN > 6) throw Error (`Fretboard.stateChange() error, strN is wrong:[${key}].`)\n\n      let ii = flt.indexOf(strN+',')\n      if(val === true){ //add to list\n        if(ii < 0){\n          flt += strN+','\n          // console.log('stateChange Add:', key, val, flt)\n           this.setState({ strgFltrList:flt })\n        }\n      }\n      else{ //remove from list\n        if(ii >= 0){\n          flt = flt.replace(strN+',')\n          // console.log('stateChange Del:', key, val, flt)\n           this.setState({ strgFltrList:flt })\n        }\n      }\n    }else\n    if(key === 'fretFirst')\n      this.setState({ fretFirst:val })\n    else\n    if(key === 'fretLast')\n      this.setState({ fretLast:val })\n    else\n    if(key === 'octave')\n      this.setState({ octave:val })\n    else\n    if(key === 'scaleName'){\n      this.setState({ scaleName:val })\n    }else\n    if(key === 'chordName'){\n      this.setState({ chordName:val })\n    }else\n    if(key === 'ivlName'){\n      this.setState({ ivlName:val })\n    }else\n    if(key === 'semis')\n      this.setState({ semis:val })\n  }\n  makeQuery(){\n    let qry = {\n      rootType: this.state.rootType,\n      root: null,\n      note: (this.state.rootType === 'fretRoot' \n              ? this.state.fretRoot.notes[0] \n              : this.state.selNoteVal ), \n      octave: this.state.octave,\n      scale: null,\n      chord:null,\n      ivl: null,\n\n      collapsed: this.state.collapsed,\n      fretBtnText: this.state.fretBtnText,\n      fretFilter: this.state.fretFilter,\n      noteFilter: this.state.noteFilter,\n      fretSelect: this.state.fretSelect,\n      fretSelectMatch: this.state.fretSelectMatch,\n    }\n    if(qry.rootType === 'fretRoot')\n      qry.root = this.state.fretRoot    //note object, set in FretPnl.fretClick()\n    if(qry.rootType === 'selNote' && qry.note !== '' && qry.note !== 'All')\n      qry.root = q.notes.objByNote( qry.note )    //note object\n    if(qry.rootType === 'fretSelect')\n      qry.root = this.state.fretSelect[0]    //note object, set in FretPnl.fretClick()\n    \n    if(qry.fretSelectMatch != null){\n      if(qry.fretSelectMatch.type === 'chord')\n        qry.fretSelectMatch.obj = q.chords.obj( qry.fretSelectMatch.note, qry.fretSelectMatch.abr )\n      else\n      if(qry.fretSelectMatch.type === 'scale')\n        qry.fretSelectMatch.obj = q.scales.obj( qry.fretSelectMatch.note, qry.fretSelectMatch.abr )\n    }\n\n    if(this.state.scaleName !== '' && qry.root)\n      qry.scale = q.scales.obj( qry.note, this.state.scaleName )\n    if(this.state.chordName !== '' && qry.root)\n      qry.chord = q.chords.obj( qry.note, this.state.chordName )\n    if(this.state.ivlName !== '' && qry.root){\n      qry.ivl = q.intervals.byName( this.state.ivlName )    //this.props.ivlName == abr\n      qry.ivl.note = q.notes.calc( qry.note, qry.ivl )\n      // qry.ivl.notes = q.notes.bySemis( qry.root.semis +qry.ivl.semis )\n    }\n    return qry\n  }\n  render(){\n    let qry = this.makeQuery()\n    console.log('Fretboard.render()', this.props, this.state, qry)\n    return(\n      <div className='fretboard' id={'Fretboard'+this.props.fbid}>\n        <FretPnl\n          collapsed={this.state.collapsed}\n          fretFirst={this.state.fretFirst}\n          fretLast={this.state.fretLast}\n\n          ivlName={this.state.ivlName}\n\n          selNoteVal={this.state.selNoteVal} \n\n          qry={qry}\n          stateChange={this.stateChange}\n          strgFltr={this.strgFltr}\n          fretSelectFind={this.fretSelectFind}\n        />\n        <QueryPnl \n          fbid={this.props.fbid}\n          collapsed={this.state.collapsed}\n          fretFirst={this.state.fretFirst}\n          fretLast={this.state.fretLast}\n\n          selNoteVal={this.state.selNoteVal} \n          chordName={this.state.chordName}\n          scaleName={this.state.scaleName}\n          ivlName={this.state.ivlName}\n\n          duplicate={this.duplicate}\n          qry={qry}\n          remove={this.remove}\n          reset={this.reset} \n          stateChange={this.stateChange}\n          strgFltr={this.strgFltr} \n         />\n      </div>\n    )\n  }\n}\n\nexport default Fretboard;\n","/*\n  About Dialog\n  - for GuitarJoe by Chris DeFreitas\n\n  requires:\n    Dialog.css\n*/\nimport React from 'react';\nimport Popup from 'reactjs-popup';\nimport './Dialog.css';\n\nconst About = () => (  \n  <Popup\n    trigger={<button className=\"btnInfo\">About</button>}\n    modal\n    nested\n  >\n    {close => (\n      <div className=\"modal\">\n        <div className=\"header\"> About GuitarJoe </div>\n        <div className=\"content\">\nImportant: <br />\n&nbsp;- Everything is clickable...please explore<br />\n&nbsp;- use your browser's zoom controls to enlarge/shrink the controls\n<br /><br />\nGuitarJoe is a free web application, no ads, no logins, no tracking.  \nThe goal was to create a tool that would make guitar theory accessible while practicing.\nI am not anything close to a musician, so\nI was going crazy taking notes and diagraming chords, scales and intervals: I needed a tool\nto facilitate my understanding so I could focus on the guitar instead of managing scraps of information.\nThis application has successfully reduced my hair loss--I hope it has the same effect on you!\n<br /><br />\nAt this point it is a proof of concept as I wrangle technologies and concepts.  \nI am an IT guy who is (obviously) not musically gifted, so there is a lot of research behind the functionality.\nMy aim is to keep the app freely available to support those learning guitar; a warm thanks for those who have supported my various journeys.\n<br /><br />\n&nbsp;- Tested to work in Chrome(Windows), Firefox(Windows, Linux), and Safari(iPad, iPhone)<br />\n&nbsp;- Review documentation, updates and references in the <a href='https://github.com/ChrisDeFreitas/guitarjoe/' target='_new'>GitHub Repository</a> <br />\n&nbsp;- Send comments and bugs to <a href='mailto:ChrisDeFreitas777@gmail.com?subject=GuitarJoe:'>ChrisDeFreitas777@gmail.com</a>\n<br /><br />\nThanks to<br />\n&nbsp;- Application hosted on <a href='https://github.com/ChrisDeFreitas/guitarjoe' target='_new'>Github</a>  <br />\n&nbsp;- Background image from <a href='https://www.flickr.com/photos/webtreatsetc/with/4514047664/' target='_new'>WebTreats ETC</a> <br />\n&nbsp;- Built with the <a href='https://reactjs.org/' target='_new'>React</a> Javascript library <br />\n&nbsp;- Chords verified using <a href='https://www.omnicalculator.com/other/chord' target='_new'>Omni Chord Calculator</a><br />\n&nbsp;- <a href='https://chir.ag/projects/name-that-color/'>Name that Color</a> by Chirag Meta\n&nbsp;- Fuggles font by Robert Leuschke on <a href='https://fonts.google.com/?query=Robert+Leuschke/' target='_new'>Google Fonts</a> <br />\n&nbsp;- Guitar icon by monkik from the <a href='https://thenounproject.com/term/guitar/2588464/' target='_new'>Noun Project</a> <br />\n&nbsp;- Intervals verified using <a href='https://www.omnicalculator.com/other/music-interval' target='_new'>Omni Music Interval Calculator</a><br />\n&nbsp;- Music theory from <a href='https://www.wikipedia.org/' target='_new'>Wikipedia</a><br />\n&nbsp;- Popup control from <a href='https://react-popup.elazizi.com/' target='_new'>reactjs-popup</a> <br />\n&nbsp;- Scales researched with <a href='https://ianring.com/musictheory/scales' target='_new'>A Study of Scales</a> at <a href='https://ianring.com/musictheory/'>The Exciting Universe Of Music Theory</a><br />\n&nbsp;- Scales researched with <a href='https://www.scales-chords.com/scalenav.php' target='_new'>ScaleChords' Musical Scale Navigator</a><br />\n<br />\nCreated by Chris DeFreitas, BC Canada<br />\n        </div>\n        <div className=\"actions\">\n          <button\n            className=\"button\"\n            onClick={() => {\n              console.log('modal closed ');\n              close();\n            }}\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    )}\n  </Popup>\n)\n\nexport default About","/*\n  App.js\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - entrypoint for GuitrJoe app\n\n*/\nimport React, { useState } from 'react';\n\nimport './App.css';\n// import './Bgnd.css';\n// import Bgnd from \"./Bgnd.js\";\nimport Fretboard from \"./Fretboard.js\"\nimport About from \"./AboutDlg.js\"\nimport { ReactComponent as Logo } from './resources/logo.svg'\n\n\nfunction App(){\n\n  const [fbs, setFbs] = useState( [{id:0, state:true}] )  //one cell for each fretboard instance\n  const [newid, setNewId] = useState( null )\t\t// assigned in duplicate()\n  \n  function indexOfFbid( fbid ){\n    for(let ii=0; ii < fbs.length; ii++){\n      if(fbs[ii].id === fbid)\n        return ii\n    }\n    return false\n  }\n  function duplicate( fretboard ){\n    let fbid = fretboard.props.fbid,\n      list = fbs.slice(),\n      nid = list.length,\n      obj = {id:nid, state:fretboard.state},\n      idx = indexOfFbid( fbid )\n      \n    if(idx === false)\n      throw new Error(`App.duplicate() error, fbid=[${fbid}] not found.`)\n      \n    list.splice( (idx +1), 0, obj)\t\t\n    setFbs( list )\n    setNewId( nid )\n    // console.log('App.duplicate', list)\n  }\n  function remove( fretboard ){\n    let fbid = fretboard.props.fbid,\n      list = fbs.slice(),\n      idx = indexOfFbid( fbid )\n     \n    if(idx === false)\n      throw new Error(`App.remove() error, fbid=[${fbid}] not found.`)\n\n    list[ idx ].state = false\n    setNewId( null )\n    setFbs( list )\n    // console.log('App.remove()', fbid, list)\n  }\n\n  let list = [], fbCount=fbs.length\n  for(let ii=0; ii < fbCount; ii++){\n    let el = null,\n      id = fbs[ii].id,       //use in .key to help react\n      state = fbs[ii].state  //one of: true, state object, false(a deleted fretboard)\n    if(id === newid){   //create new fretboard\n      el = <Fretboard key={id} fbid={id} duplicate={duplicate} remove={remove} \n\t\t\t\tcollapsed={state.collapsed}\n\t\t\t\tfretFirst={state.fretFirst}\n\t\t\t\tfretLast={state.fretLast}\n\t\t\t\tfretBtnText={state.fretBtnText}\n\t\t\t\tfretFilter={state.fretFilter}\n\t\t\t\tstrgFltrList={state.strgFltrList}\n        noteFilter={state.noteFilter}\n        fretSelect={state.fretSelect}\n        fretSelectMatch={state.fretSelectMatch}\n\t\t\t\trootType={state.rootType}\n\t\t\t\tfretRoot={state.fretRoot}\n\t\t\t\tselNoteVal={state.selNoteVal} \n\t\t\t\toctave={state.octave} \n\t\t\t\tscaleName={state.scaleName}\n\t\t\t\tchordName={state.chordName}\n\t\t\t\tivlName={state.ivlName}\n      />\n    }else{\n      if(state !== false) //existing fretboard; magic of react does not overwrite old data\n        el = <Fretboard key={id} fbid={id} duplicate={duplicate} remove={remove} />\n    }\n    if(el != null)\n      list.push( el )\n  }\n\n  return (\n    <div className=\"App\">\n\t\t\t<header className=\"App-header header\">\n        <Logo className=\"Logo\" alt=\"Logo\" />\n        GuitarJoe v0.1.3 <About />\n      </header>\n\t\t\t{list}\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n\t  <App />\n\t</React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals( console.log );\n"],"sourceRoot":""}