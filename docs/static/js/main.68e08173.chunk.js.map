{"version":3,"sources":["guitar_lib.js","react-abcjs.js","resources/logo.svg","FretPnl.js","QueryPnl.js","Fretboard.js","AboutDlg.js","App.js","index.js"],"names":["q","chords","list","name","abr","intervals","byName","str","chord","Object","assign","obj","root","chordName","ivls","preferFlats","indexOf","note","iname","ivl","notes","calc","push","type","fullName","fullAbbrev","inversions","octave","robj","toUpperCase","objByNote","Number","cobj","maxinversions","length","result","max","positions","rivls","cnt","pos","idx","ioctave","ridx","semis","inversionNotes","invrObj","invrPos","undefined","local_invrToNobj","invr","strgn","parent","rootfret","nobj","strg","fretboard","fret","byNote","fretMax","num","maxInversions","tmp","inversion","fnd","forEach","strings","tabLetter","fretMin","fretMinSet","nn","init","fretMaxSet","ii","strgN","fretInRange","strgnum","tab","bySemis","objBySemis","objByTab","ltr","substr","tabByFret","strN","nm","returnFirst","alpha","ivlOrName","rprefix","rsuffix","iprefix","newlet","newsfx","local_inc","find","fobj","match","nobjList","nidx","slice","comparisons","iidx","splice","toAbc","noteLength","acc","Math","floor","scales","short","scaleName","scale","ivlAbr","shortName","abbrevName","octaveNum","Abcjs","uniqueNumber","Date","now","random","abcNotation","parserParams","engraverParams","renderParams","abcjsObj","renderAbc","this","props","renderAbcNotation","style","width","id","PureComponent","defaultProps","responsive","viewportHorizontal","_g","FretPnl","buttonClick","bind","fretBtnTextChange","fretClick","fretFltrClick","strgFltrClick","event","qry","btn","target","nodeName","parentNode","stopPropagation","rootType","dataset","state","stateChange","fretSelect","fretSelectFind","selected","fretBtnText","cell","strn","isNaN","console","log","fretfilter","clientY","getBoundingClientRect","top","offsetHeight","strgFiltered","document","querySelector","fbid","currentTarget","capStyle","btnState","fsmatch","noteFilter","btncaption","key","minPadding","paddingtop","paddingbottom","paddingleft","paddingright","staffwidth","textboxpadding","nii","className","onClick","qq","local_rootFind","button","local_noteFind","local_fretSelectFind","fso","local_fretSelectMatchFind","fretSelectMatch","local_octaveFind","local_scaleFind","local_chordFind","inv","inversionNoteByTab","local_ivlFind","trArray","first","fretFirst","last","fretLast","ss","row","frets","strgFltr","col","fretFltr","fretFilter","btnStrFltr","cls","collapsed","onMouseDown","stringdiv","selNoteVal","React","Component","QueryPnl","btnDupeClick","btnDelClick","selLabelClick","selChordChange","btnClearClick","btnCollapseClick","selIntervalChange","selNoteChange","selOctaveChange","selScaleChange","fsChordClick","fsScaleClick","infoNoteClick","invrLabelClick","remove","duplicate","val","reset","lbl","ivlName","sel","options","selectedIndex","text","value","onChange","omin","oct","datastate","chd","html","title","noblist","filter","a","lastkey","lastname","iobj","ob","drawFretSelectMatches","invrs","inversionPos","selNote","selOct","selInt","selScale","selChord","drawSelNote","drawSelOctave","drawSelInterval","drawSelScale","drawSelChord","infoPnl","drawInfo","arrow","Fretboard","strgFilter","fretRoot","makeQuery","setState","objOrTab","Array","isArray","sort","b","About","trigger","modal","nested","close","href","_excluded","_extends","i","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLogo","_ref","svgRef","titleId","xmlns","viewBox","x","y","ref","fill","stroke","strokeWidth","d","points","height","ForwardRef","App","useState","fbs","setFbs","newid","setNewId","indexOfFbid","nid","Error","fbCount","el","strgFltrList","alt","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.68e08173.chunk.js","sourcesContent":["/*\n  //♭ &flat; alt+?\n  \n  GuitarJoe's guitar logic\n  by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  \n   Note:\n    - note refers to what we usually call a note: C#\n    - note object: { strgnum:int, fret:int, note:'C#', semis:49, ... }\n    - note.semis is unique\n    - fret is an integer\n    - fobj is a fret object: frets.obj() => { strg:{}, fret:int, tab:'e12' }\n    - ivl is an interval object: intervals.list[n]\n    - assume: exception handling performed by caller\n\n  Todo:\n    - check for code consistency\n    - (when needed) update notes.calc() for ##/bb -- see comments in function\n  \n */\n\nvar q = {\n\n  chords: {\n    //verified against: https://www.omnicalculator.com/other/chord\n    list:[\n      {\n        name:'Major triad', abr:'maj',\n        intervals:[ 'P1', 'M3', 'P5' ]\n      },{\n        name:'Minor triad', abr:'min',\n        intervals:[ 'P1', 'm3', 'P5' ]\n      },{\n        name:'Augmented triad', abr:'aug',\n        intervals:[ 'P1', 'M3', 'A5' ]\n      },{\n        name:'Diminished triad', abr:'dim',\n        intervals:[ 'P1', 'm3', 'd5' ]\n      },{\n        name:'Dominant seventh', abr:'7',\n        intervals:[ 'P1', 'M3', 'P5', 'm7' ]\n      },{\n        name:'Major seventh', abr:'maj7',\n        intervals:[ 'P1', 'M3', 'P5', 'M7' ]\n      },{\n        name:'Minor seventh', abr:'min7',\n        intervals:[ 'P1', 'm3', 'P5', 'm7' ]\n      },{\n        name:'Major sixth', abr:'maj6',\n        intervals:[ 'P1', 'M3', 'P5', 'M6' ]\n      },{\n        name:'Minor sixth', abr:'min6',\n        intervals:[ 'P1', 'm3', 'P5', 'M6' ]\n      },{\n        name:'Suspended second', abr:'sus2',\n        intervals:[ 'P1', 'M2', 'P5' ]\n      },{\n        name:'Suspended fourth', abr:'sus4',\n        intervals:[ 'P1', 'P4', 'P5' ]\n      }\n    ],\n    byName( str ){\n      for(let chord of q.chords.list){\n        if(chord.abr === str || chord.name === str)\n          return Object.assign({}, chord )\n      }\n      return null\n    },\n    obj( root, chordName ){  //return chord with notes based on root\n      let ivls = [],\n        chord = q.chords.byName( chordName )\n      if(chord === null) return null\n\n      if(typeof root === 'string')\n        root = q.intervals.byName( root )   //object returned to caller\n      if(root === null) return null\n\n      let preferFlats = ( \n          chord.name.indexOf('Minor') >= 0  \n        ||chord.name.indexOf('Diminished') >= 0 \n        || root.note.indexOf('♭') >= 0)\n      for(let iname of chord.intervals){\n        let ivl = q.intervals.byName( iname )\n        let note = q.notes.calc( root, ivl, preferFlats )\n        ivls.push( Object.assign({}, ivl, { note:note } ))\n      }\n\n      let obj = Object.assign({}, chord, {\n        type:'chord',\n        fullName: root.note +' '+chord.name,\n        fullAbbrev: root.note +chord.abr,\n        root: Object.assign({}, root),\n        ivls:ivls\n       })\n\n      return obj\n    },\n    inversions( note, chord, octave = 0 ){   // return an inversion object for given note and scale\n      let robj = null\n      if( typeof note === 'object' ){\n        robj = note\n        note = robj.note\n      }else{\n        note = note.toUpperCase()\n        robj = q.notes.objByNote( note )\n      }\n      if(octave === null) octave = 0\n      robj.octave = Number(octave)\n      let cobj = null\n      if( typeof chord === 'object' ){\n        cobj = chord\n        chord = cobj.abr\n      }else\n        cobj = q.chords.obj(note, chord)\n\n      let maxinversions = cobj.ivls.length\n      let result = { root:robj.note, chord:chord, octave:octave, max:maxinversions, positions:{} }\n      let rivls = cobj.ivls\n      let positions = ['Root','First','Second','Third','Fourth','Fifth']\n\n\n      for( let cnt = 1; cnt <= maxinversions; cnt++){\n        let pos = positions[ cnt -1 ]\n        result.positions[ pos ] = {}\n        let obj = result.positions[ pos ]\n\n        for( let idx = 1; idx <= maxinversions; idx++ ){\n          let ioctave = robj.octave\n          let ridx = idx +(cnt -2) \n          if(ridx >= maxinversions) {\n            ridx -= maxinversions\n            ioctave++\n          }\n          // console.log({idx:idx, ridx:ridx})\n          obj[idx] = Object.assign({}, rivls[ ridx ], { \n            octave:ioctave,\n            semis:q.semis.calc( rivls[ ridx ].note, ioctave )\n          })\n        }\n      }\n      // console.log( result.positions )\n      return result\n    },\n    inversionNotes( invrObj, invrPos ){ //return note objects for all fretboard locations of given inversion\n\n      if( invrObj.positions[invrPos] === undefined )\n        return null\n\n      function local_invrToNobj( invr, strgn, parent = null, rootfret = null ){\n        let nobj = null\n        let strg = q.fretboard.strg( strgn )\n        let note = invr.note\n        let fret = ( q.intervals.byNote( note ).semis  -q.intervals.byNote( strg.note ).semis )\n        if(fret < 0) fret += 12\n        \n        if(rootfret != null) fret = rootfret +12  //for root position: find multiple notes on string\n        \n        while( fret <= q.fretboard.fretMax ){\n          //  console.log('fret'+fret+':', {strg:strg.note, invr:note, fret:fret} )\n          if(fret <= q.fretboard.fretMax){\n            nobj = q.notes.obj( strg.num, fret, note )\n            // console.log('  search:', {iOctave:invr.octave, nOctave:nobj.octave, nobjFret:nobj.fret, parentFret:parentFret })\n            if( parent === null || (nobj.fret >= parent.fret-3 && nobj.fret <= parent.fret+3 ))  //verify proximity of frets\n            //don't verify octaves, leave it for the user to inspect\n            // && ( [0,1].indexOf(invr.octave) >= 0 || nobj.octave === invr.octave ))  //octave == 0||1 means note selected from QueryPnl.selNote\n              break;\n            else{   //keep searching string\n              fret += 12\n              nobj = null\n            }\n          }\n        }\n        return nobj\n      }\n\n      let chord = invrObj.root +invrObj.chord\n      let maxInversions = invrObj.max\n      let inversions = invrObj.positions[invrPos]\n\n      let tmp = []  //temporary store for notes found\n      let list = []     //returned with all notes found\n      for(let strgn = 6; strgn >= maxInversions; strgn--){   //because of inversion logic, rootnote can never be on upper strings\n\n        let rootfret = null\n        while( rootfret === null || rootfret < q.fretboard.fretMax){  //allow searching for root note multiple times\n          //calc fret position of root note\n          let invr = inversions[1]\n          let nobj = local_invrToNobj( invr, strgn, null, rootfret )\n          if(nobj === null) break\n          tmp[0] = nobj\n          tmp[0].invr = {chord:chord, inversion:invrPos, abr:invr.abr, num:1}\n          rootfret = nobj.fret    //\n\n          //calc note n\n          let fnd = true\n          for(let num = 2; num <= maxInversions; num++){\n            let parent = nobj\n            invr = inversions[ num ]\n            nobj = local_invrToNobj( invr, strgn -(num -1), parent, null )\n            if(nobj === null) {\n              fnd = false\n              break\n            }\n            tmp[ num -1 ] = nobj\n            tmp[ num -1 ].invr = {chord:chord, inversion:invrPos, abr:invr.abr, num:num}\n          }\n          if(fnd === false) continue\n/*\n          //calc note 2\n          let parent = nobj\n          invr = inversions[2]\n          nobj = local_invrToNobj( invr, strgn -1, parent, null )\n          if(nobj === null) continue\n          tmp[1] = nobj\n          tmp[1].invr = {chord:chord, inversion:invrPos, abr:invr.abr, num:2}\n\n          //calc note 3\n          parent = nobj\n          invr = inversions[3]\n          nobj = local_invrToNobj( invr, strgn -2, parent, null)\n          if(nobj === null) continue\n          tmp[2] = nobj\n          tmp[2].invr = {chord:chord, inversion:invrPos, abr:invr.abr, num:3}\n*/\n          tmp.forEach( nobj => list.push( nobj ) )\n          //add code to allow each string to be searched again\n          // if(tmp[0].fret < q.fretboard.fretMax )\n        }\n      }\n      if(list.length === 0) return null\n      return list\n    }\n\n  },\n\n  fretboard: {\n    strings: [\n      {num:1, note:'E', octave:4, semis:0, tabLetter:'e' },\n      {num:2, note:'B', octave:3, semis:0, tabLetter:'B' },\n      {num:3, note:'G', octave:3, semis:0, tabLetter:'G' },\n      {num:4, note:'D', octave:3, semis:0, tabLetter:'D' },\n      {num:5, note:'A', octave:2, semis:0, tabLetter:'A' },\n      {num:6, note:'E', octave:2, semis:0, tabLetter:'E' }\n    ],\n\n    fretMin:1,\n    fretMax:14,\n    fretMinSet( nn ){   //not used as yet\n      q.fretboard.fretMin = nn\n      q.fretboard.init()\n    },\n    fretMaxSet( nn ){   //not used as yet\n      q.fretboard.fretMax = nn\n      q.fretboard.init()\n    },\n\n    init(){\n      for(let ii = 0; ii <= q.fretboard.strings.length -1; ii++){\n        let strg = q.fretboard.strings[ii]\n        q.fretboard.strings[ii].semis = q.semis.calc(strg.note, strg.octave)\n      }\n    },\n    strg( strgN ){  \n      return Object.assign({}, q.fretboard.strings[ strgN -1 ])\n    },\n    fretInRange(nobj, root, num = 3){\n      //assume: root is a notes.obj()\n      let max = (num <= 5 ?5 :num)\n      if((root.fret <= 1 && nobj.fret <= max)\n      || (root.fret > 1 && nobj.fret >= (root.fret -num)\n         && nobj.fret <= (root.fret +num)) )\n        return true\n      return null\n    },\n    obj( strg, fret ){\n      if( typeof strg === 'number')\n        strg = q.fretboard.strg( strg )\n      let semis = strg.semis +Number(fret)\n      return {\n        fret:fret, \n        // strg:Object.assign( {}, strg ), \n        strgnum:strg.num, \n        tab:(strg.tabLetter +fret),\n        semis: semis,\n        notes: q.notes.bySemis(semis)\n      }\n    },\n    objBySemis( semis ){\n      let fret = null,\n        fretMax = q.fretboard.fretMax\n      for(let strg of q.fretboard.strings){\n        if(semis >= strg.semis && semis <= (strg.semis +fretMax)){\n          fret = ( semis -strg.semis )\n          return q.fretboard.obj( strg, fret )\n        }\n      }\n      return null\n    },\n    objByTab( tab ){\n      let ltr = tab.substr(0,1),\n        fret = Number(tab.substr(1))\n      for( let strg of q.fretboard.strings ){\n        if(strg.tabLetter === ltr){\n          return q.fretboard.obj( strg, fret )\n        }\n      }\n      return null\n    },\n    tabByFret( strN, fret ){  // return example: 'e12'\n      strN = Number( strN )\n      for( let strg of q.fretboard.strings ){\n        if(strg.num === strN){\n          return ( strg.tabLetter +fret )\n        }\n      }\n      return null\n    },\n  },\n\n  intervals:{\n    list:[\n      //rules:\n      // 1. order by semitones\n      // 2. prefer perfect, major, minor first\n      // 3. prefer minor over diminished\n      // 4. prefer augmented last\n      // 5. removed (♭♭, TT) because added complexity not relevant to most uses\n      // \n      {name:'Perfect unison', abr:'P1',  semis:0, note:'C' },\n      //{name:'Diminished second', abr:'d2', semis:0, note:'D♭♭' },\n      \n      {name:'Minor second', abr:'m2', semis:1, note:'D♭' },\n      {name:'Augmented unison', abr:'A1', semis:1, note:'C#' },\n      \n      {name:'Major second', abr:'M2', semis:2, note:'D' },\n      // {name:'Diminished third', abr:'d3', semis:2, note:'E♭♭' },\n      \n      {name:'Minor third', abr:'m3', semis:3, note:'E♭' },\n      {name:'Augmented second', abr:'A2', semis:3, note:'D#' },\n      \n      {name:'Major third', abr:'M3', semis:4, note:'E' },\n      {name:'Diminished fourth', abr:'d4', semis:4, note:'F♭' },\n\n      {name:'Perfect fourth', abr:'P4', semis:5, note:'F'},\n      {name:'Augmented third', abr:'A3', semis:5, note:'E#'},\n      \n      {name:'Diminished fifth', abr:'d5', semis:6, note:'G♭' },\n      {name:'Augmented fourth', abr:'A4', semis:6, note:'F#' },\n      // {name:'Tritone', abr:'TT', semis:6, note:'TT' },\n      \n      {name:'Perfect fifth', abr:'P5', semis:7, note:'G' },\n      // {name:'Diminished sixth', abr:'d6', semis:7, note:'A♭♭' },\n      \n      {name:'Minor sixth', abr:'m6', semis:8, note:'A♭' },\n      {name:'Augmented fifth', abr:'A5', semis:8, note:'G#' },\n      \n      {name:'Major sixth', abr:'M6', semis:9, note:'A' },\n      // {name:'Diminished seventh', abr:'d7', semis:9, note:'B♭♭' },\n      \n      {name:'Minor seventh', abr:'m7', semis:10, note:'B♭' },\n      {name:'Augmented sixth', abr:'A6', semis:10, note:'A#' },\n      \n      {name:'Major seventh', abr:'M7', semis:11, note:'B' },\n      {name:'Diminished octave', abr:'d8', semis:11, note:'C♭' },\n      \n      {name:'Perfect octave', abr:'P8', semis:12, note:'C' },\n      {name:'Augmented seventh', abr:'A7', semis:12, note:'B#' },\n    ],\n  \n    byNote( note ){\n      note = note.toUpperCase()\n      for(let ivl of q.intervals.list){\n        if(ivl.note === note)\n          return Object.assign({}, ivl)\n      }\n      return null\n    },\n    byName( nm ){\n      let note = nm.toUpperCase()\n      for(let ivl of q.intervals.list){\n        if(ivl.abr === nm || ivl.note === note || ivl.name === nm)\n          return Object.assign({}, ivl)\n      }\n      return null\n    },\n    bySemis( semis, returnFirst = false ){   //return intervals where semis match\n      semis = semis % 12\n      let list = []\n      for(let ivl of q.intervals.list){\n        if(ivl.semis > semis) break    //shortcircuit, intervals ordered by semis\n        if(ivl.semis === semis){\n          let obj = Object.assign({}, ivl)\n          if(returnFirst === true) return obj\n          list.push( obj )\n        }\n      }\n      return list\n    }\n  },\n\n  notes:{\n    list:['C','C#','D♭','D','D#','E♭','E','F','F#','G♭','G','G#','A♭','A','A#','B♭','B'],\n    alpha:['C','D','E','F','G','A','B'],\n\n    bySemis( semis, returnFirst = false ){\n      let list = []\n      semis = Number(semis) % 12\n      for(let ivl of q.intervals.list ){\n        if(ivl.semis === semis){\n          if(returnFirst === true) return ivl.note\n          list.push( ivl.note )\n        }\n        if(ivl.semis > semis) break //intervals ordered by semis\n      }\n      return list\n    },\n    calc( root, ivlOrName, preferFlats = false){  //iterate by semitones to get new note with correct #/b\n      // assume: preferFlats === true: return only flats\n\n      // to handle ##/bb:\n      // 1. pre-loop: resolve to standard note, get new root interval, proceed as normal: C## => D\n      // 2. post loop(???): if ivl requires ##/bb, manually resolve based on new note: D => C##\n\n      if(typeof root === 'object') root = root.note\n      let rprefix = root.substr(0,1)\n      let rsuffix = root.substr(1,2)\n      // console.log('root='+root, 'rprefix='+rprefix, 'rsuffix='+rsuffix)\n\n      let ivl = (typeof ivlOrName === 'object' ?ivlOrName : q.intervals.byName(ivlOrName))\n      let iprefix = ivl.abr.substr(0,1)    // A as in A1\n      // console.log('ivl.abr='+ivl.abr, 'iprefix='+iprefix )\n\n      // test: display matching intervals\n      // let rivl = q.intervals.byName( root )\n      // let list = q.intervals.bySemis( rivl.semis +ivl.semis )\n      // console.log( 'ivl.semis='+ivl.semis, '\\nlist=', list  )\n\n      //assume: no ## or bb used\n      let max = ivl.semis, idx = 0    //idx = q.notes.alpha.indexOf( ltr ) ::: test\n      let newlet = rprefix, newsfx = rsuffix\n      function local_inc( ltr ){\n        idx = q.notes.alpha.indexOf( ltr ) // this can probably be refactored out: notes.alpha[idx % 7] always === newlet; lookup not required\n        idx++\n        return q.notes.alpha[ idx % 7]\n      }\n      for(let ii = 0; ii < max; ii++){\n        // console.log('root='+root, 'newlet='+newlet+newsfx)\n        if(newlet === 'B' && newsfx === ''){ \n          newlet = 'C'; \n        }else\n        if(newlet === 'E' && newsfx === ''){ \n           newlet = 'F'; \n        }else\n        if(newsfx === '♭'){\n          newsfx = ''\n        }else\n        if(newsfx === '#'){\n          newsfx = ''\n          newlet = local_inc( newlet )\n        } \n        else  //newsfx === ''\n        if(iprefix === 'm' || iprefix === 'd'  || preferFlats === true){\n          newsfx = '♭'\n          newlet = local_inc( newlet )\n        }\n        else\n          newsfx = '#'\n      }\n      // console.log('root='+root, 'newlet='+newlet+newsfx)\n      return newlet+newsfx\n    },\n\n    find( strgN, note ){ //return null or list of note objects on string\n      let result = []\n      let strg = q.fretboard.strg( strgN )\n      let max = strg.semis +q.fretboard.fretMax\n      let semis = strg.semis\n      while(semis <= max){\n        let notes = q.notes.bySemis( semis )\n        if(notes.indexOf( note) >= 0){\n          let nobj = q.notes.obj(strg, semis -strg.semis, note)\n          result.push( nobj )\n          semis += 12\n        }\n        else\n          ++semis\n      }\n\n      if(result.length === 0) return null\n      return result\n    },\n    obj( strg, fret, note = null  ){\n      // console.log(111, fret, strg.num)\n      if(typeof strg === 'number')\n        strg = q.fretboard.strg( strg )\n      if(fret < 0) return null\n      let semis = strg.semis +fret\n      if(semis > (strg.semis +q.fretboard.fretMax)) return null\n\n      let octave = q.octave(semis),\n          list = q.notes.bySemis( semis )\n      return {\n        fret: fret,\n        note: (note === null ?list[0] :note),\n        notes: list,\n        octave: octave,\n        semis: semis,\n        // strg: strg, \n        strgnum: strg.num, \n        tab: strg.tabLetter +fret\n      }\n    },\n    objByNote( note /*, octave = 0 */ ){\n      let ivl = q.intervals.byNote( note ),\n          semis = ivl.semis /* +(octave * 12) */,\n          list = q.notes.bySemis( semis )\n          //, fobj = q.fretboard.objBySemis( semis )\n      return {\n        fret: null, // fobj.fret,    //null because input is not specific to a fret\n        note:note,\n        notes:list,\n        octave:null,  //octave,\n        semis:semis,\n        // strg: null, // fobj.strg,\n        strgnum: null, // fobj.strg.num,\n        tab: null // fobj.tab,\n      }\n    },\n    objByTab( tab ){\n      let fobj = q.fretboard.objByTab( tab )\n      return q.notes.obj( fobj.strg, fobj.fret )\n    },\n\n    match( ivls, nobjList ){    //return true/false if notes in nobjList contained within ivls\n      //used to match scales and chords to user selected frets\n      //assume: ivls is a list of intervals.list[n]\n      //assume: nobjList is a list of notes.obj()\n      //assume: no duplicate items allowed\n      //assume: ivls.length > nobjList.length \n      //assume: there may be ivls[n] between matched items: c,e matches c,d,e\n      //assume: matches may occur across head/tail boundaries: e,c matches c,d,e\n      //generally this is a pattern matching algorithm between two lists\n      if(nobjList.length > ivls.length) return false\n\n      let list = nobjList.slice()   //to support rotating list\n      let fnd, nidx\n\n      //break on first match of all items in nobjList\n      for(let comparisons = 1; comparisons <= list.length; comparisons++){ //max comparisons = original pattern +(list.length -1) rotations \n\n        fnd = false; nidx = 0    //reset search params\n        for(let iidx = 0; iidx < ivls.length; iidx++){    //iterate ivls\n          if(list[nidx].notes.indexOf( ivls[iidx].note ) >= 0){ //increment when list item found; allows for gaps in range\n            if(++nidx === list.length){   //point to next list item\n              // console.log( 'found:', comparisons, list, ivls )\n              fnd = true; break   \n            } \n          }\n        }\n\n        if(fnd === true) break\n        list.push( list.splice(0,1)[0] ) //rotate list by moving head to tail\n      }\n\n      return fnd\n    },\n\n    toAbc( nobj, noteLength = 8 ){\n      let result = ''\n      \n      let acc = nobj.note.substr(1)\n      if(acc === '#') result = '^'\n      else\n      if(acc === '♭') result = '_'\n      else\n      if(acc === '##') result = '^^'\n      else\n      if(acc === '♭♭') result = '__'\n\n      result += nobj.note.substr(0,1)\n       \n      if(nobj.octave === 1) result += ',,'\n      else\n      if(nobj.octave === 2) result += ','\n      else\n      //if(nobj.octave === 3) result = result\n      //else\n      if(nobj.octave === 4) result += \"'\"\n      else\n      if(nobj.octave === 5) result += \"''\"\n      else\n      if(nobj.octave === 6) result += \"''\"\n      else\n      if(nobj.octave === 7) result += \"'''\"\n\n      return result +noteLength\n    }\n  },\n\n  octave( semis ){\n    return Math.floor( semis / 12 )\n  },\n\n  scales:{\n    list:[\n      // tested with: https://www.omnicalculator.com/other/music-scale\n      //            https://www.scales-chords.com/scalenav.php\n      // rules:\n      //   keep accidentals of the same type -- all flat or sharp\n      { name:'Major', abr:'M', short:'Major',\n        // list:[ 'C', 'D', 'E', 'F', 'G', 'A', 'B'],\n        intervals:['P1','M2','M3','P4','P5','M6','M7']\n      },\n      { name:'Natural minor', abr:'m', short:'Minor', \n        // list:[ 'C', 'D', 'D#', 'F', 'G', 'A', 'A#'],\n        intervals:['P1','M2','m3','P4','P5','m6','m7']\n      },\n      { name:'Pentatonic major', abr:'P', short:'Pen.Maj', \n        // list:[ 'C', 'D', 'E', 'G', 'A'],\n        intervals:['P1','M2','M3','P5','M6']\n      },\n      { name:'Pentatonic minor', abr:'p', short:'Pen.min',\n        // list:[ 'C', 'D#', 'F', 'G', 'A#'],\n        intervals:['P1','m3','P4','P5','m7']\n      },\n      { name:'Blues heptatonic', abr:'B7', short:'Blues7',\n        intervals:['P1','M2','m3','P4','d5','M6','m7']\n      },\n      { name:'Blues hexatonic', abr:'B6', short:'Blues6',\n        // 1, ♭3, 4, ♭5, 5, ♭7\n        intervals:['P1','m3','P4','d5','P5','m7']\n      },\n      { name:'Akebono I', abr:'Ak1', short:'Akebono1',\n        intervals:['P1','M2','m3','P5','M6']   // https://ianring.com/musictheory/scales/653 {0,2,3,7,9}\n      },\n      { name:'Akebono II', abr:'Ak2', short:'Akebono2',\n        intervals:['P1','m2','M3','P5','m6']\n        // https://pianoencyclopedia.com/scales/akebono-ii/C-akebono-ii.html:  C, bD, E, G, bA \n        // also: https://ianring.com/musictheory/scales/419\n        // also: https://www.flutopedia.com/csc_5tone_12tet.htm\n      },\n      // { name:'Chromatic', abr:'Ch', short:'Chromatic',\n      //   intervals:['P1','m2','M2','m3','M3','P4','d5','P5','m6','M6','m7','M7']\n      // },\n      { name:'Double harmonic', abr:'DH', short:'Dbl.Hrm',\n        // minor second, major third, perfect fourth and fifth, minor sixth, major seventh -- https://en.wikipedia.org/wiki/Double_harmonic_scale\n        intervals:['P1','m2','M3','P4','P5','m6','M7']\n      },\n      { name:'Gypsy minor', abr:'Gm', short:'Gypsy',\n        // step pattern is W, H, +, H, H, +, H -- https://en.wikipedia.org/wiki/Hungarian_minor_scale\n        intervals:['P1','M2','m3','d5','P5','m6','M7']\n      },\n      { name:'Hungarian major', abr:'HM', short:'Hungarian',\n        // semitones: 3, 1, 2, 1, 2, 1, 2 -- https://en.wikipedia.org/wiki/Hungarian_major_scale\n        intervals:['P1','m3','M3','d5','P5','M6','m7']\n      },\n      { name:'Phrygian dominant', abr:'Pd', short:'Phrygian',\n        //1 – ♭2 – 3 – 4 – 5 – ♭6 – ♭7 – 1  https://en.wikipedia.org/wiki/Phrygian_dominant_scale\n        intervals:['P1','m2','M3','P4','P5','m6','m7']\n      },\n      { name:'Pygmy', abr:'Py', short:'Pygmy',\n        intervals:['P1','M2','m3','P5','m7']\n        // https://ianring.com/musictheory/scales/397  {0,2,3,7,8}\n        // also: https://alchetron.com/Pygmy-music#Pygmy-scale\n      }\n    ],\n    byName( scaleName ){\n      for(let scale of q.scales.list){\n        if(scale.name === scaleName || scale.short === scaleName || scale.abr === scaleName)\n          return Object.assign({}, scale)\n      }\n      return null\n    },\n    obj( root, scaleName ){  //return scale, root and scale intervals\n      let ivls = []\n\n      if(typeof root === 'string')        //else interval object\n        root = q.intervals.byName( root )\n      if(root === null) return null\n\n      let scale = q.scales.byName( scaleName )\n      if(scale === null) return null\n\n      let preferFlats = ( scaleName.indexOf('minor') >= 0 || root.note.indexOf('♭') >= 0 )\n\n      for(let ivlAbr of scale.intervals){   //generate intervals for scale built on root\n        let ivl = q.intervals.byName( ivlAbr )\n        let note = q.notes.calc( root, ivl, preferFlats )\n        ivl = Object.assign( {}, ivl, {\n          abr: ivlAbr,    //abbreviation may differ from one assigned to scale\n          note:note,\n        })\n        ivls.push( ivl )\n      }\n\n      let obj = Object.assign( {}, scale, {\n        type:'scale',\n        fullName: root.note +' '+scale.name,\n        shortName: root.note +' '+scale.short,\n        abbrevName: root.note +scale.abr,\n        root: Object.assign({}, root),\n        ivls: ivls \n      })\n      return obj\n    }\n  },\n\n  semis:{\n    calc(note, octaveNum){   //return number of semitones\n        //assume: ocatveNum range: 0 to infinity\n        //assume: Middle C (C4) == (C,4) == (48 +0) == 48\n        //assume:            C0 == (C,0) == ( 0 +0) ==  0\n        //assume: A440     (A4) == (A,4) == (48 +9) == 57\n        let semis = (octaveNum *12)\n        semis += q.intervals.byName( note ).semis\n        return semis\n    },\n  },\n}\n\n\nq.fretboard.init()\nexport default q","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport abcjsObj from 'abcjs'\n\nclass Abcjs extends PureComponent {\n  uniqueNumber = Date.now() + Math.random()\n\n  renderAbcNotation(abcNotation, parserParams, engraverParams, renderParams) {\n    // const res = abcjsObj.renderAbc(\n    abcjsObj.renderAbc(\n      'abcjs-result-' + this.uniqueNumber,\n      abcNotation,\n      parserParams,\n      engraverParams,\n      renderParams\n    )\n    \n//    return res\n  }\n\n  componentDidMount() {\n    const { abcNotation, parserParams, engraverParams, renderParams } = this.props\n    this.renderAbcNotation(abcNotation, parserParams, engraverParams, renderParams)\n  }\n\n  componentDidUpdate() {\n    const { abcNotation, parserParams, engraverParams, renderParams } = this.props\n    this.renderAbcNotation(abcNotation, parserParams, engraverParams, renderParams)\n  }\n\n  render() {\n    return (\n      <div style={{ width: '100%' }}>\n        <div id={'abcjs-result-' + this.uniqueNumber} style={{ width: '100%' }} />\n      </div>\n    )\n  }\n}\n\nAbcjs.propTypes = {\n  abcNotation: PropTypes.string,\n  parserParams: PropTypes.object,\n  engraverParams: PropTypes.object,\n  renderParams: PropTypes.object,\n}\n\nAbcjs.defaultProps = {\n  abcNotation: '',\n  parserParams: {},\n  engraverParams: { responsive: 'resize' },\n  renderParams: { viewportHorizontal: true },\n}\n\nexport default Abcjs\n","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 64 64\",\n    x: \"0px\",\n    y: \"0px\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"#ffffff\",\n    stroke: \"#0006\",\n    strokeWidth: \"1px\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30,23v-4a2,2,0,1,0,0,4Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M48,24V18.038L47.967,18H32.033L32,18.038V25a7.979,7.979,0,0,0,3.556,6.648l.124.078a8.078,8.078,0,0,0,8.762-.076A7.982,7.982,0,0,0,48,25ZM35.5,22A1.5,1.5,0,1,1,37,20.5,1.5,1.5,0,0,1,35.5,22Zm3.361,6H37V26h1.861a7.445,7.445,0,0,0,3.635-.864L43.5,26.864A9.353,9.353,0,0,1,38.861,28ZM44.5,22A1.5,1.5,0,1,1,46,20.5,1.5,1.5,0,0,1,44.5,22Z\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"17.279 13 18 10.838 18 4 13 4 13 10.838 13.721 13 17.279 13\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17,35.226V15H14V35.226A5.657,5.657,0,0,1,17,35.226Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M50,19v4a2,2,0,0,0,0-4Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M48,11.41v-.021q0-.66-.034-1.324c0-.022,0-.043,0-.065H32.038c0,.022,0,.044,0,.066-.022.441-.033.883-.034,1.323V12H48Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M31,16H49a3.006,3.006,0,0,0,2.829-2H28.171A3.006,3.006,0,0,0,31,16Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M47.613,6.793A3.329,3.329,0,0,0,44.32,4a3.357,3.357,0,0,0-2.781,1.489,1.853,1.853,0,0,1-3.076,0A3.359,3.359,0,0,0,35.68,4a3.33,3.33,0,0,0-3.292,2.79c-.067.4-.1.806-.154,1.21H47.766C47.716,7.6,47.679,7.19,47.613,6.793Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M40,35a9.941,9.941,0,0,1-4-.847V36.17a2,2,0,0,1-1.637,1.963l-1.188.224.383,1.576a6.629,6.629,0,0,0,12.884,0l.383-1.576-1.19-.224A2,2,0,0,1,44,36.17V34.147A9.946,9.946,0,0,1,40,35Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18,57V56H11a1,1,0,0,1-1-1V51a1,1,0,0,1,1-1h7V45.4a5.495,5.495,0,0,1-6-9.131V29.151a5.078,5.078,0,0,0-3.991,4.606,4.891,4.891,0,0,0,.041.926,12.5,12.5,0,0,1-2.032,9.29A9.98,9.98,0,0,0,4,50.3,10.262,10.262,0,0,0,14.35,60h2.3a10.328,10.328,0,0,0,1.8-.161A4.013,4.013,0,0,1,18,58Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22.7,58H20a1.958,1.958,0,0,0,.814,1.608A2.01,2.01,0,0,0,22,60h4a1.006,1.006,0,0,1-.555-.168Z\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"28 60 28.017 59.998 26 60 28 60\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"53.303 51 60 51 60 49 56.303 49 53.303 51\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M59.941,43.492c-.005-.031-.013-.062-.018-.093a3.991,3.991,0,0,0-.142-.523c-.025-.069-.05-.137-.078-.2a3.814,3.814,0,0,0-.239-.509h0a3.982,3.982,0,0,0-.377-.54c-.014-.018-.03-.034-.045-.051a4.006,4.006,0,0,0-.914-.786c-.06-.038-.12-.075-.18-.108a3.871,3.871,0,0,0-.511-.245l-.041-.017a4.017,4.017,0,0,0-.67-.186l-7.941-1.466-.4,1.643a8.629,8.629,0,0,1-16.772,0l-.4-1.643-7.941,1.466a3.962,3.962,0,0,0-1.248.461c-.044.025-.087.051-.132.079a3.953,3.953,0,0,0-.388.277c-.063.051-.125.1-.184.156-.1.09-.191.186-.28.284-.059.065-.118.13-.173.2a4,4,0,0,0-.576,1c-.025.062-.049.125-.071.189a3.913,3.913,0,0,0-.158.583v0a4.035,4.035,0,0,0-.063.708V47h4a1.006,1.006,0,0,1,.555.168L30.3,51H49.7l5.748-3.832A1.006,1.006,0,0,1,56,47h4V44.162A4.012,4.012,0,0,0,59.941,43.492Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30,53a1.006,1.006,0,0,1-.555-.168L23.7,49H20v7h3a1.006,1.006,0,0,1,.555.168L26.3,58H32l20.1,2.005L58,60a2,2,0,0,0,2-2V53H30Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.448,37.594a3.542,3.542,0,0,0-3.893,0,3.492,3.492,0,1,0,4.619,5.133l.012-.059a.716.716,0,0,1,.023-.1c.028-.1.077-.2.11-.293.042-.127.089-.251.14-.374.038-.092.06-.184.1-.277.079-.164.158-.311.238-.451l0-.01c.053-.093.109-.174.163-.257A3.571,3.571,0,0,0,19,40.5,3.469,3.469,0,0,0,17.448,37.594Z\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: 12,\n    y: 52,\n    width: 6,\n    height: 2\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21.134,38.906c.094-.051.18-.119.276-.164l.447-.192a3.5,3.5,0,0,1,.549-.175,3.424,3.424,0,0,1,.462-.11,15.6,15.6,0,0,1,.081-3.578,4.84,4.84,0,0,0,.042-.926A5.079,5.079,0,0,0,19,29.151v7.113a5.445,5.445,0,0,1,1.815,2.825C20.919,39.024,21.025,38.965,21.134,38.906Z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.97fcb56e.svg\";\nexport { ForwardRef as ReactComponent };","/*\n  FretPnl.js\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - manage activation of fretboard controls for GuitarJoe app\n\n*/\n\nimport React from 'react'\nimport './FretPnl.css';\nimport './FretButton.css';\nimport q from \"./guitar_lib.js\";\nimport Abcjs from \"./react-abcjs\"\n\nclass FretPnl extends React.Component{\n\n  constructor (props) {\n    super(props)\n    this.buttonClick = this.buttonClick.bind(this)\n    this.fretBtnTextChange = this.fretBtnTextChange.bind(this)\n    this.fretClick = this.fretClick.bind(this)\n    this.fretFltrClick = this.fretFltrClick.bind(this)\n    this.strgFltrClick = this.strgFltrClick.bind(this)\n  }\n  buttonClick( event ){\n    let qry = this.props.qry,\n      btn = event.target\n    if(btn.nodeName !== 'BUTTON'){ \n      btn = btn.parentNode      //span\n      if(btn.nodeName !== 'BUTTON') \n        btn = btn.parentNode    //span span\n    }\n    if(btn.nodeName !== 'BUTTON') return\n    event.stopPropagation()\n\n    if(['fretRoot','selNote'].indexOf( qry.rootType ) >= 0  \n    && ['fretRoot','selNote'].indexOf( btn.dataset.state ) >= 0\n    && qry.scale === null && qry.chord === null && qry.ivl === null){    //nothing to do, turn off fretRoot state\n\t    this.props.stateChange( 'fretRoot', null )\n    } else\n    if(qry.rootType === 'fretSelect' && btn.dataset.state === 'fretSelect'\n    && btn.dataset.tab === qry.fretSelect[0].tab){ //hide button\n        // console.log('buttonClick(): stop fretSelect')\n    \t\tthis.props.stateChange( 'fretSelect', null )\n        return\n    } else\n    if(qry.rootType === 'fretSelect' && this.props.fretSelectFind( btn.dataset.tab ) >= 0){ //this is a selected fret\n      if(qry.fretSelect.length === 2 )    //one selected fret after this hidden, change to fretRoot\n\t\t    this.props.stateChange( 'fretRoot', qry.fretSelect[0] )\n      else    //more than two frets selected, deselect this button\n     \t\tthis.props.stateChange( 'fretSelect', btn.dataset.tab)\n    }\n    else{   //toggle button selected state\n      let selected = Number( btn.dataset.selected )\n      if(selected === 0)\n        btn.dataset.selected = 1\n      else\n      if(selected === 1)\n        btn.dataset.selected = 0\n    }\n  }\n  fretBtnTextChange( event ){   //toggle formatting of fret button captions\n    // console.log('fretBtnTextChange', event)\n    let qry = this.props.qry\n    event.stopPropagation()\n    \n   if(qry.note === 'All'){\n      if(qry.fretBtnText === 'NoteTab')\n   \t  \tthis.props.stateChange( 'fretBtnText', 'NoteAbc' )\n      else\n        this.props.stateChange( 'fretBtnText', 'NoteTab' )\n    }\n    else\n    if(this.props.qry.fretBtnText === 'NoteFirst')\n   \t\tthis.props.stateChange( 'fretBtnText', 'IvlFirst' )\n    else\n    if(this.props.qry.fretBtnText === 'IvlFirst')\n   \t\tthis.props.stateChange( 'fretBtnText', 'IvlAbc' )\n    else\n    if(this.props.qry.fretBtnText === 'IvlAbc')\n   \t\tthis.props.stateChange( 'fretBtnText', 'IvlTab' )\n    else\n   \t\tthis.props.stateChange( 'fretBtnText', 'NoteFirst' )\n  }\n  fretClick( event ){\n    let qry = this.props.qry,\n      cell = event.target,\n      strN = Number(cell.dataset.strn), \n      fret = Number(cell.dataset.fret)\n\n    if( isNaN(strN) ){\n      console.log('FretPnl.fretClick() error, bad caller:', cell)\n      return \n    }\n    event.stopPropagation()\n    if(cell.dataset.fretfilter === \"true\")\n      return\n\n    if(strN === 7){\n      strN = 6\n    }else\n    if(strN !== 1 && cell.nodeName === 'TD'){ //calc string to use\n      let  cy = event.clientY,\n        abs = cell.getBoundingClientRect(),\n        top = abs.top,\n        mid = top +(cell.offsetHeight  /2)\n\n      if(cy < mid) strN--\n    }\n\n    if(this.props.strgFiltered( strN ) === true)\n      return\n\n    // console.log('fretPnl.fretClick:', strN, fret, cell.className)\n    let note = q.notes.obj( strN, fret )\n    let btn = document.querySelector( '#Fretboard' +qry.fbid +' .fretButton[data-tab=' +note.tab +']')\n    if(btn !== null){\n      event.target = btn\n      this.buttonClick( event )\n      return\n    } else\n    if(['','selNote'].indexOf(qry.rootType) >= 0){\n\t\t  this.props.stateChange( 'fretRoot', note )\n    }else\n    if(qry.rootType === 'fretRoot'){\n\t\t  this.props.stateChange( 'fretSelect', [qry.root, note] )\n    }else\n    if(qry.rootType === 'fretSelect'){\n\t    this.props.stateChange( 'fretSelect', note )\n    }\n  }\n  fretFltrClick( event ){ //toggle state for frets\n    let //qry = this.props.qry,\n      btn = event.currentTarget,\n      fret = Number( btn.dataset.fret )\n\n    event.stopPropagation()\n    // console.log( 'fretFltrClick:', fret, qry.fretFilter )\n    this.props.stateChange( 'fretFilter', fret )\n  }\n  strgFltrClick( event ){\n    let btn = event.currentTarget,\n      strN = btn.dataset.strn\n    this.props.stateChange( 'strgFilter', strN )\n    event.stopPropagation()\n  }  \n\n  button( nobj, root ){\n    // sample:\n    // <button title='Note' className='fretButton'>C\n    //   <sub title='octave'>4</sub>\n    //   <sup title='Interval'>P1</sup>\n    // </button>\n    let qry = this.props.qry, ivl = nobj.ivl, capStyle = qry.fretBtnText\n\n    let btnState = '', selected = 0\n    //tag root note button\n    if(root === 'ALL'){   //user selected All Notes\n      if(qry.octave !== 0 && qry.octave !== nobj.octave)\n        return null      \n      // capStyle = 'NoteTab' //force for this selection\n      console.log(111, qry.fretBtnText)\n      // capStyle = qry.fretBtnText\n      if( ['NoteAbc','NoteTab'].indexOf( qry.fretBtnText ) < 0 )\n        capStyle = 'NoteAbc'\n    }else\n    if(qry.rootType === 'fretRoot'){\n      if(nobj.notes.indexOf( root.note ) >= 0  &&  nobj.semis === root.semis){\n        btnState = qry.rootType\n      }\n    }else\n    if(qry.rootType === 'selNote'){\n      if(root.notes.indexOf( nobj.note ) >= 0){ \n        btnState = qry.rootType\n      }\n    }else\n    if(qry.rootType === 'fretSelect'){\n      // if(nobj.ivl.abr === 'P1' && nobj.tab === qry.fretSelect[0].tab){\n      if(nobj.tab === qry.fretSelect[0].tab){\n        btnState = qry.rootType\n      }else\n      if(nobj.fsmatch)\n        btnState = 'fretSelectMatch'\n    }\n \n    \n    if(btnState === '' && nobj.state)    //allow color coding of selChords and selInterval notes\n      btnState = nobj.state\n    if(nobj.state === 'invr' || nobj.state === 'invr1' )  //displaying an inversion\n      btnState = nobj.state\n    if(qry.noteFilter.indexOf( nobj.note ) >= 0){ //test against props.noteFilter -- allow overriding roottype because user selected\n      btnState = 'noteFilter'\n    }\n\n    //format button caption\n    let btncaption = [], key=0\n    let renderParams = {    //for AbcJs\n      minPadding:5,   //doesn't work\n      paddingtop:0,\n      paddingbottom:0,\n      paddingleft:0,\n      paddingright:0,\n      //responsive: \"resize\",\n      scale:(nobj.octave <= 2 || nobj.octave >= 5 ?0.3 :0.4),\n      staffwidth:18,\n      textboxpadding:0,\n    }\n\n    let note = nobj.note\n    let nii = note.indexOf('♭')\n    if(nii >= 1)    //safari does not render ♭ properly\n      note = <span className='btnFlatNote'>{note.substr(0, nii)}&#9837;</span>\n    else\n      note = <span>{note}</span>\n\n    \n    if(capStyle === 'IvlFirst'){\n      if(nobj.ivl){\n        btncaption.push(\n          <span key={++key} className='spanIvl' onClick={this.buttonClick} >\n            <span key={++key} onClick={this.buttonClick} >{ivl.abr.substr(0,1)}</span>\n            {ivl.abr.substr(1)}\n          </span>\n        )\n      }\n      btncaption.push(\n        <sub key={++key} className='subNote' onClick={this.fretBtnTextChange}>{nobj.note}\n            <sub key={++key} className='subOctave' >{nobj.octave}</sub>\n        </sub>\n      )\n    }else\n    if(capStyle === 'IvlAbc'){\n      btncaption.push(\n        <span key={++key} className='spanIvl' onClick={this.buttonClick} >\n          <span key={++key} onClick={this.buttonClick} >{ivl.abr.substr(0,1)}</span>\n          {ivl.abr.substr(1)}\n        </span>\n      )\n      btncaption.push(\n        <sub key={++key} className='ivlabc abc' onClick={this.fretBtnTextChange}\n           ><Abcjs key={++key} \n          abcNotation={'K:clef=none\\n y' +q.notes.toAbc( nobj )}\n          renderParams={renderParams} parserParams={{}} engraverParams={{}}\n        /></sub>\n      )\n    } else\n    if(capStyle === 'IvlTab'){\n      btncaption.push(\n        <span key={++key} className='spanIvl' onClick={this.buttonClick} >\n          <span key={++key} onClick={this.buttonClick} >{ivl.abr.substr(0,1)}</span>\n          {ivl.abr.substr(1)}\n        </span>\n      )\n      btncaption.push(\n        <sub key={++key} className='ivltab tab' onClick={this.fretBtnTextChange}\n          >{nobj.tab}</sub>\n      )\n    }else\n    if(capStyle === 'NoteTab'){      \n      btncaption.push(\n        <span key={++key} className='spanNote'  onClick={this.buttonClick} >{note}\n            <sub key={++key} className='subOctave' onClick={this.buttonClick} >{nobj.octave}</sub>\n        </span>\n      )\n      btncaption.push(\n        <sub key={++key} className='notetab tab' onClick={this.fretBtnTextChange}\n          >{nobj.tab}</sub>\n      )\n    }else\n    if(capStyle === 'NoteAbc'){\n      btncaption.push(\n        <span key={++key} className='spanNote'  onClick={this.buttonClick} >{note}\n            <sub key={++key} className='subOctave' onClick={this.buttonClick} >{nobj.octave}</sub>\n        </span>\n      )\n      btncaption.push(\n        <sub key={++key} className='abc' onClick={this.fretBtnTextChange}\n           ><Abcjs key={++key} \n          abcNotation={'K:clef=none\\n y' +q.notes.toAbc( nobj )}\n          renderParams={renderParams} parserParams={{}} engraverParams={{}}\n        /></sub>\n      )\n    } \n    else {\n    // if(capStyle === 'NoteFirst'){\n      btncaption.push(\n        <span key={++key} className='spanNote'  onClick={this.buttonClick} >{note}\n            <sub key={++key} className='subOctave' onClick={this.buttonClick} >{nobj.octave}</sub>\n        </span>\n      )\n      if(nobj.ivl){\n        btncaption.push(\n          <sub key={++key} className='subInterval' onClick={this.fretBtnTextChange} >{ivl.abr}</sub>\n        )\n      }\n    }\n \n    return(\n      <button key={++key} className='fretButton'  onClick={this.buttonClick}\n        data-strn={nobj.strgnum} data-fret={nobj.fret} data-semis={nobj.semis}  data-tab={nobj.tab} \n        data-state={btnState} data-selected={selected}\n      >\n        {btncaption}\n      </button>\n    )  \n  }\n  render(){\n    let qq = this,\n      qry = this.props.qry\n    // console.log('fretPnl.render()', this.props)\n\n    function local_rootFind( nobj ){    //select fret = selected fret\n      if(qry.rootType !== 'fretRoot') return null\n\n      // if(nobj.fret === qry.root.fret && nobj.strgnum === qry.root.strgnum){\n      if(nobj.tab === qry.root.tab){\n        return qq.button( nobj, qry.root  )\n      }\n      return null\n    }\n    function local_noteFind( nobj ){    //select all frets with note = selNoteVal\n      if(qry.rootType !== 'selNote') return null\n\n      let idx = nobj.notes.indexOf(qry.note)\n      if(qry.note === '' ||  idx >= 0){\n        if(qry.octave === 0 || qry.octave === nobj.octave){\n          if(qry.note !== '')\n            nobj.note = qry.note\n          return qq.button( nobj, qry.root  )\n      }  }\n      return null\n    }\n    function local_fretSelectFind( nobj ){\n      if(qry.rootType !== 'fretSelect') return null\n      if(qry.fretSelect.length === 0) return null\n\n      for(let fso of qry.fretSelect){\n        if(nobj.tab === fso.tab){\n          if(qry.octave === 0 || qry.octave === nobj.octave){\n            nobj.ivl = fso.ivl\n            nobj.note = fso.note\n            return qq.button( nobj, qry.root )\n          }\n        }\n      }\n      return null\n    }\n    function local_fretSelectMatchFind( nobj ){\n      if(qry.rootType !== 'fretSelect') return null\n      if(qry.fretSelectMatch === null) return null\n\n      for(let ivl of qry.fretSelectMatch.obj.ivls){\n        if(nobj.notes.indexOf( ivl.note ) >= 0){\n          if(qry.octave === 0 || qry.octave === nobj.octave){\n            nobj.ivl = ivl\n            nobj.note = ivl.note\n            if(qq.props.fretSelectFind( nobj.tab ) < 0)\n              nobj.fsmatch = true\n            return qq.button( nobj, qry.root )\n          }\n        }\n      }\n      return null\n    }\n\n    function local_octaveFind(nobj){  //find notes for selected octave\n      if(qry.note !== '') return\n\n      if(qry.octave === nobj.octave){\n        nobj.ivl = qry.ivl\n        return qq.button( nobj, qry.root  )\n      }\n      return null\n    }\n    function local_scaleFind( nobj ){\n      if(qry.scale === null) return null\n\n      if(qry.rootType === 'fretRoot'){    //exclude frets\n        if(q.fretboard.fretInRange(nobj, qry.root) !== true)\n          return null\n      }\n      for(let ivl of qry.scale.ivls){\n        if( nobj.notes.indexOf(ivl.note) >= 0){\n          if(qry.octave === 0 || qry.octave === nobj.octave){\n            nobj.ivl = ivl\n            nobj.note = ivl.note\n            return qq.button( nobj, qry.root )\n          }\n        }\n      }\n      return null\n    }\n    function local_chordFind( nobj ){\n      if(qry.chord === null) return null\n      if(qry.inversionNotes !== null){\n        let inv = qq.props.inversionNoteByTab( nobj.tab )\n        if(inv !== null){\n          if(qry.octave === 0 || qry.octave === nobj.octave){\n            // nobj.ivl = ivl\n            nobj.note = inv.note\n            nobj.ivl = inv.invr\n            nobj.state = 'invr' +(inv.invr.num === 1 ?1 :'')\n            return qq.button( nobj, qry.root )\n          }\n        }\n      }\n      if(qry.rootType === 'fretRoot'){    //exclude frets\n        if(q.fretboard.fretInRange(nobj, qry.root) !== true)\n          return null\n      }\n      for(let ivl of qry.chord.ivls){\n        if( nobj.notes.indexOf(ivl.note) >= 0){\n          if(qry.octave === 0 || qry.octave === nobj.octave){\n            nobj.ivl = ivl\n            nobj.note = ivl.note\n            nobj.state = 'chord'   //new, allow for color coding of chords\n            return qq.button( nobj, qry.root )\n          }\n        }\n      }\n      return null\n    }\n    function local_ivlFind( nobj ){     //select frets matching interval\n      if(qry.ivl === null) return null\n      \n      let btn = null\n      if( (qry.rootType === 'fretRoot' && nobj.tab === qry.root.tab)\n      ||  (qry.rootType === 'selNote' && nobj.notes.indexOf(qry.note) >= 0) ){ //this is the root note object\n        btn = 'root'\n      } else\n      if(qry.rootType === 'fretRoot' && q.fretboard.fretInRange(nobj, qry.root, 4) === true){\n        if( nobj.notes.indexOf(qry.ivl.note) >= 0 )\n          btn = true\n      }else\n      if(qry.rootType === 'selNote' && nobj.notes.indexOf(qry.ivl.note) >= 0){\n        btn = true\n      }\n\n      if(btn === 'root'){\n        nobj.ivl = q.intervals.byName('P1')\n        nobj.note = qry.note\n        btn = qq.button( nobj, qry.root  )\n      }else\n      if(btn === true && (qry.octave === 0 || qry.octave === nobj.octave)){\n        nobj.ivl = qry.ivl\n        nobj.note = qry.ivl.note\n        nobj.state = 'interval'   //new, allow for color coding of intervals\n        btn =  qq.button( nobj, qry.root  )\n      }\n      return btn\n    }\n\n    //make table's tr and td\n    let trArray = [],\n      fretMax = q.fretboard.fretMax,    \n      first = this.props.fretFirst,\n      last = this.props.fretLast,\n      ss = ''\n    for (let row = 1; row <= 9; row++) {\n      let frets = []\n      let strN = row -1\n      let strgFltr = this.props.strgFiltered( strN )\n\n      for (let col = 0; col <= fretMax +1; col++) {\n        let tab = '',\n          fretFltr = (qry.fretFilter.indexOf( col ) >= 0)\n\n        let btnStrFltr = null    //create string filter button for fret0 and fretMax\n        if(col === 0 && strN >= 1 && strN <= 6){\n          btnStrFltr=(<div onClick={this.strgFltrClick} data-strn={strN}\n            className={'btnFilter btnStrgFltr btnStrgFltr'+strN}\n           ><div>&diams;</div></div>\n          )\n        }\n\n        if(row === 1){  //top border, fret filter disabled because may not be needed\n          let cls = (col === (fretMax +1) ?'borderRight tdBorder'+col :'tdBorder'+col)\n          let ss = (col === first || col === (fretMax +1) ?' ' :col)\n          if(ss === col && qry.collapsed === true){\n            if([5,7,9,12].indexOf(col) >= 0)\n              ss = <div data-fret={col} className='collapsed' >&nbsp;</div>\n            else\n              ss = ''\n          }\n          frets.push( <td key={col} \n            data-fret={col} data-fretfilter={fretFltr}\n            onMouseDown={this.fretFltrClick} className={cls}>{ss}</td> \n          )\n        }else\n        if(row === 9){  //bottom frame\n\n          if(col === (fretMax +1))    //right bottom corner frame\n            frets.push( <td key={col} className={'borderRight tdBottom col'+col}></td> )\n          else {      //bottom fret frame\n            frets.push(<td key={col} className={'tdBottom col'+col}></td>)\n           }\n\n        }else{   // generate frets with right and left borders\n\n          if(col === fretMax +1){   // right border\n            frets.push( <td key={col} data-strn={strN} data-col={col} className={'borderRight col'+col}></td> )\n          } \n          else{ //fretboard cells\n            let btn = null, stringdiv = null, nobj = null\n\n            if(strN >= 1 && strN <= 6)\n              stringdiv = <div className='stringdiv' onClick={this.fretClick} data-strn={strN} data-fret={col} ></div>\n\n            //process fret button\n            if( strN <= 6\n             && fretFltr === false    //no filter applied to fret\n             && strgFltr === false    //no filter applied to string\n             && col >= first \n             && col <= last){         //filter by fretboard range\n              nobj = q.notes.obj( strN, col )\n              tab = nobj.tab\n\n              if(qry.rootType === 'selNote' && this.props.selNoteVal === 'All'){\n                btn = qq.button( nobj, 'ALL' )  //no root when showimg all notes\n              }\n              else {\n                // all modes respect selOctave filter\n                //fretSelect mode\n                btn = local_fretSelectMatchFind( nobj )\n                if(btn === null) btn = local_fretSelectFind( nobj )\n                // fretRoot and selNote mode\n                if(btn === null) btn = local_ivlFind( nobj )\n                if(btn === null) btn = local_chordFind( nobj )\n                if(btn === null) btn = local_scaleFind( nobj )\n                if(btn === null){\n                  if(qry.rootType === 'fretRoot')\n                    btn = local_rootFind( nobj )  //only select the fret clicked\n                  else\n                  if(qry.rootType === 'selNote')\n                    btn = local_noteFind( nobj )  //select all frets with note = selNoteVal\n                }\n                if(btn === null) btn = local_octaveFind( nobj )\n              }\n            }  \n            frets.push(<td key={col} className={'fret fret'+col} onClick={this.fretClick} \n              data-strn={strN} data-fret={col} data-tab={tab} data-fretfilter={fretFltr} >\n              {btnStrFltr}\n              {btn}\n              {stringdiv}\n              <div className='fretbar' onClick={this.fretClick} data-strn={strN} data-fret={col} ></div>\n            </td>)\n           }\n        }\n      }\n\n      if(row === 1) \n        ss = 'frame frameTop'\n      else\n      if(row === 8) \n        ss = 'borderBottom'\n      else\n      if(row === 9) \n        ss = 'frame frameBottom'\n      else{\n        ss = 'strg strg' +(row -1)\n      }\n      trArray.push( <tr key={row} className={ss} data-fltr={strgFltr}>{frets}</tr> )\n    }\n    return (\n      <div className='fretPnlContainer'>\n        <table className='fretPnl'><tbody>\n          {trArray}\n        </tbody></table>\n      </div>\n    )\n  }\n}\n\nexport default FretPnl\n","/*\n  QueryPnl.js\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - manage query controls for GuitarJoe app\n\n*/\nimport React from 'react'\nimport q from \"./guitar_lib.js\"\n\n\nclass QueryPnl extends React.Component {\n\n  constructor(props){\n    super(props)\n\n    this.btnDupeClick = this.btnDupeClick.bind(this)\n    this.btnDelClick = this.btnDelClick.bind(this)\n\n    this.last = {}    //store last query params before reset via label.click\n    this.selLabelClick = this.selLabelClick.bind(this)\n\n    this.selChordChange = this.selChordChange.bind(this)\n    this.btnClearClick = this.btnClearClick.bind(this)\n    this.btnCollapseClick = this.btnCollapseClick.bind(this)\n    // this.selFretNoChange = this.selFretNoChange.bind(this)\n    this.selIntervalChange = this.selIntervalChange.bind(this)\n    this.selNoteChange = this.selNoteChange.bind(this)\n    this.selOctaveChange = this.selOctaveChange.bind(this)\n    this.selScaleChange = this.selScaleChange.bind(this)\n    this.fsChordClick = this.fsChordClick.bind(this)\n    this.fsScaleClick = this.fsScaleClick.bind(this)\n    this.infoNoteClick = this.infoNoteClick.bind(this)\n\n    this.invrLabelClick = this.invrLabelClick.bind(this)\n  }\n\n  //event handlers\n  btnDelClick(){\n    this.props.remove()\n  }\n  btnDupeClick(){\n    this.props.duplicate()\n  }\n  btnCollapseClick(){\n    let val = !this.props.qry.collapsed\n    this.props.stateChange( 'collapsed', val )\n  }\n  btnClearClick(){\n    // this.props.dispatch({ type:\"FretboardActions/fretFirstUpdate\", payload:'' })\n    this.props.reset()\n  }\n  fsChordClick( event ){\n    let btn = event.target, qry = this.props.qry\n    // console.log('fsChordClick', btn.dataset.note, btn.dataset.abr)\n\n    if(btn.dataset.selected === 'label'){    //user clicked the label\n      this.props.stateChange( 'fretSelectMatch', null )\n      this.props.stateChange( 'noteFilter', 'clear' )\n    }\n    else{   //default operation\n      if(qry.fretSelectMatch != null\n      && qry.fretSelectMatch.note === btn.dataset.note && qry.fretSelectMatch.abr === btn.dataset.abr)    //turn off selected match\n        this.props.stateChange( 'fretSelectMatch', null )\n      else\n        this.props.stateChange( 'fretSelectMatch', {type:'chord', note:btn.dataset.note, abr:btn.dataset.abr} )\n    }\n  }\n  fsScaleClick( event ){\n    let btn = event.target, qry = this.props.qry\n    // console.log('fsScaleClick', btn.dataset.note, btn.dataset.abr)\n\n    if(btn.dataset.selected === 'label'){    //user clicked the label\n      this.props.stateChange( 'fretSelectMatch', null )   //turn off selected match\n      this.props.stateChange( 'noteFilter', 'clear' )\n    }\n    else{   //default operation\n      if(qry.fretSelectMatch != null \n      && qry.fretSelectMatch.note === btn.dataset.note && qry.fretSelectMatch.abr === btn.dataset.abr)\n        this.props.stateChange( 'fretSelectMatch', null )   //turn off selected match\n      else\n        this.props.stateChange( 'fretSelectMatch', {type:'scale', note:btn.dataset.note, abr:btn.dataset.abr} )\n    }\n  }\n  \n  infoNoteClick(event){\n    event.stopPropagation()\n\n    let btn = event.target   \n    if(btn.dataset.selected === 'label'){    //user clicked the label\n      this.props.stateChange( 'fretSelectMatch', null )\n      this.props.stateChange( 'noteFilter', 'clear' )\n    }\n    else {   //default operation\n      if(btn.className !== 'ivl')\n        btn = btn.parentNode\n      \n      let note = btn.dataset.note     \n      // console.log('infoNoteClick', btn, note)\n      if(typeof note === 'string')\n        this.props.stateChange( 'noteFilter', note )\n        // this.props.stateChange( 'noteFilter', note, btn.className )\n    }\n  }\n  invrLabelClick(event){\n    event.stopPropagation()\n    let btn = event.target   \n    this.props.stateChange( 'inversionPos', btn.dataset.invr )\n  }\n  selLabelClick( event ){     //reset param to off value\n    let qry = this.props.qry,\n      lbl = event.target,\n      val = lbl.dataset.selected\n    // console.log('last', this.last)\n    if(val === 'true'){\n      if(lbl.dataset.type === 'note'){\n        if(qry.rootType === '') return\n        \n        this.last['rootType'] = qry.rootType\n        this.last['root'] = qry.root\n        if(this.last['rootType'] === 'selNote')\n          this.props.stateChange( 'selNoteVal', '' )\n        if(this.last['rootType'] === 'fretRoot')\n          this.props.stateChange( 'fretRoot', null )\n      }else\n      if(lbl.dataset.type === 'chord'){\n        if(qry.chord === null) return\n        this.last['chordName'] = qry.chord.name\n        this.props.stateChange( 'chordName', '' )\n      }else\n      if(lbl.dataset.type === 'scale'){\n        if(qry.scale === null) return\n        this.last['scaleName'] = qry.scale.name\n        this.props.stateChange( 'scaleName', '' )\n      }else\n      if(lbl.dataset.type === 'octave'){\n        this.last['octave'] = qry.octave\n        this.props.stateChange( 'octave', 0 )\n      }else\n      if(lbl.dataset.type === 'ivlName'){\n        this.last['ivlName'] = this.props.ivlName\n        this.props.stateChange( 'ivlName', '' )\n      }\n    }\n    else{   //allow toggling param on and off\n      if(lbl.dataset.type === 'note'){\n        if( !this.last.rootType ) return\n        if(this.last.rootType === 'selNote'){\n          if(this.last['root'] !== null)\n            this.props.stateChange( 'selNoteVal', this.last['root'].note )\n        } else\n        if(this.last.rootType === 'fretRoot'){\n          if(this.last['root'] !== null)\n            this.props.stateChange( 'fretRoot', this.last['root'] )\n        }\n      }else\n      if(lbl.dataset.type === 'chord'){\n        if(this.last['chordName'] && this.last['chordName'] !== '')\n          this.props.stateChange( 'chordName', this.last['chordName'] )\n      }else\n      if(lbl.dataset.type === 'scale'){\n        if(this.last['scaleName'] && this.last['scaleName'] !== '')\n          this.props.stateChange( 'scaleName', this.last['scaleName'] )\n      }else\n      if(lbl.dataset.type === 'octave'){\n        if(this.last['octave'] && this.last['octave'] !== '')\n          this.props.stateChange( 'octave', this.last['octave'] )\n      }else\n      if(lbl.dataset.type === 'ivlName'){\n        if(this.last['ivlName'] && this.last['ivlName'] !== '')\n          this.props.stateChange( 'ivlName', this.last['ivlName'] )\n      }\n    }\n  }\n  selNoteChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text\n    this.props.stateChange( 'selNoteVal', val )\n    //   this.props.dispatch({ type:\"FretboardActions/semisUpdate\", val })\n  }\n  selOctaveChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text\n    if(val === '')\n      this.props.stateChange( 'octave', 0 )\n    else\n      this.props.stateChange( 'octave', Number(val) )\n  }\n  selIntervalChange( event ){\n    let sel = event.target,\n      opt = sel.options[sel.selectedIndex],\n      abr = opt.dataset.abr\n    this.props.stateChange( 'ivlName', abr )\n  }\n  selChordChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text\n    this.props.stateChange( 'chordName', val )\n  }\n  selScaleChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text\n    this.props.stateChange( 'scaleName', val )\n  }\n\n  // draw controls\n  drawSelNote(){\n    let qry = this.props.qry,\n      list = [<option key='' ></option>,<option key='999' >All</option>]\n    for(let ii=0; ii < q.notes.list.length; ii++){\n      let note = q.notes.list[ii]\n      list.push(<option key={ii} >{note}</option>)\n    }\n\n    let note = (qry.note === null ?'' :qry.note)\n    return (\n      <div className='dataPnl pnlNote'>\n        <label data-selected={note !== ''} data-type='note' onClick={this.selLabelClick} >Note</label>\n        <select value={note} className='selNote' onChange={this.selNoteChange} >{list}</select>\n      </div>\n    )\n  }\n  drawSelOctave(){\n    let qry = this.props.qry,\n      oct = qry.octave,\n      omin = 0, omax = 0,\n      list = [<option key={999} ></option>]\n\n    omin = q.notes.obj(6, 0).octave\n    omax = q.notes.obj(1, q.fretboard.fretMax).octave\n\n    for(let ii = omax; ii >= omin; ii--){\n      list.push(<option key={ii} >{ii}</option>)\n    }\n    return (\n      <div className='dataPnl pnlOctave'>\n        <label data-selected={oct !== 0} data-type='octave' onClick={this.selLabelClick} >Octave</label>\n        <select value={oct} className='selOctave' onChange={this.selOctaveChange}>\n           {list}\n        </select>      \n      </div>\n    )\n  }\n  drawSelScale(){\n    let selected = this.props.scaleName,\n      ii=0, list = [<option key='aaa'></option>]\n    for(let scale of q.scales.list){\n      list.push(<option key={++ii} >{scale.name}</option>)\n    }\n    return (\n      <div className='dataPnl pnlScale'>\n        <label data-selected={selected !== ''} data-type='scale' onClick={this.selLabelClick} >Scale</label>\n        <select value={selected} className='selScale' onChange={this.selScaleChange} >\n          {list}\n        </select>      \n      </div>\n    )\n  }\n  drawSelChord(){\n    let ii = 0,\n      selected = this.props.chordName, \n      datastate = '',\n      list = [<option key='aaa'></option>]\n    for(let chd of q.chords.list){\n      list.push(<option key={++ii} >{chd.name}</option>)\n    }\n    if(selected !== '') datastate = 'chord'\n    return (\n      <div className='dataPnl pnlChord'>\n        <label data-selected={selected !== ''} data-type='chord' onClick={this.selLabelClick} >Chord</label>\n        <select value={selected} className='selChord' onChange={this.selChordChange} \n         data-state={datastate}>\n          {list}\n        </select>      \n      </div>\n    )\n  }\n  drawSelInterval(){\n    let qry = this.props.qry,\n      list = [<option key='aaa' ></option>],\n      ii = 0, selected = '' , datastate = ''\n    for(let ivl of q.intervals.list){\n      if(ivl.semis === 0) continue\n      if(ivl.semis === 12) continue\n      // if(ivl.abr === last) continue  should be unique\n      let html = `${ivl.name} (${ivl.abr}, ${ivl.semis})`\n      list.push(<option key={++ii} data-abr={ivl.abr} >{html}</option>)\n      if(qry.ivl !== null && selected === '' && qry.ivl.abr === ivl.abr)\n        selected = html\n      // last = ivl.abr\n    }\n    if(selected !== '') datastate = 'interval'\n    return (\n      <div className='dataPnl pnlInterval' >\n        <label data-selected={selected !== ''} onClick={this.selLabelClick} \n          data-type='ivlName' >Interval</label>\n        <select value={selected} className='selInterval' title='Intervals sorted by semis-tones'\n          data-state={datastate} onChange={this.selIntervalChange} \n        >\n          {list}\n        </select>      \n      </div>\n    )\n  }  \n  drawFretSelectMatches( html, key ){    //push matching chords and scales onto html[]\n    let qry = this.props.qry, selected = 0\n    \n    if(qry.fretSelect.length < 2) return null  \n\n    let noblist = qry.fretSelect.slice()\n    let last = null\n    noblist = noblist.filter(function(a){   //filter duplicate notes\n      if(last != null && last.notes.indexOf( a.note ) >= 0) return null\n      last = a\n      return a\n    })\n\n    //test chords for matching notes\n    let list = []\n    let lastkey = key\n    let lastname = null\n    last = null\n    for(let chord of q.chords.list){    \n\n      for(let iobj of q.intervals.list){  //iterate notes\n        if(last != null && last.semis === iobj.semis) continue\n        if(iobj.semis === 12) continue    //skip octave\n        last = iobj\n\n        let ivls = q.chords.obj( iobj.note, chord.name).ivls    \n  \t\t  let result = q.notes.match( ivls, noblist)\n\n       if(result === true)\n         list.push( {note:iobj.note, chord:chord} )\n      }\n    }\n\n    for(let ob of list){    //write matching chords\n      let chord = ob.chord\n\n      if(lastkey === key){\n        html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        html.push( <span key={++key} className='propName'\n          data-selected='label' onClick={this.fsChordClick}\n        >Matching chords:&nbsp;</span> )\n      }\n\n      selected = 0\n      if(qry.fretSelectMatch != null\n      && qry.fretSelectMatch.note === ob.note\n      && qry.fretSelectMatch.abr === chord.abr) selected = 'fretSelectMatch'\n\n      if(lastname !== null && lastname !== chord.name)\n        html.push( <i key={++key} > &mdash; </i> )\n      lastname = chord.name\n\n      html.push( \n        <span key={++key} className='ivl' onClick={this.fsChordClick} title={ob.note +' ' +chord.name}\n        data-note={ob.note} data-abr={chord.abr} data-selected={selected} \n        >&#8200;{ob.note}&#8239;{chord.abr}&#8200;</span> \n      )\n    }\n\n    //test scales for matching notes\n    list = []\n    lastkey = key\n    lastname = null\n    last = null\n    // for(let scale of q.scales.list){   ==> disabled because most scales are not necessary for this use\n    for(let scaleName of ['Major','Minor','Pen.Maj','Pen.min','Blues7','Blues6' /*,'Dbl.Hrm'*/]){\n      //can optimize by caching related minor scales when major found: \n      // Major:Nat.min; Pent Maj:Pen.min,Blues7,Blues6; Dbl.Hrm:Gypsy\n      for(let iobj of q.intervals.list){  //iterate notes\n        if(last != null && last.semis === iobj.semis) continue\n        if(iobj.semis === 12) continue    //skip octave\n        last = iobj\n\n        // let ivls = q.scales.obj( iobj.note, scale.name).ivls    \n        let scale = q.scales.obj( iobj.note, scaleName )\n        let ivls = scale.ivls    \n  \t\t  let result = q.notes.match( ivls, noblist)\n\n       if(result === true) \n         list.push( {note:iobj.note, scale:scale} )\n      }\n    }\n\n    for(let ob of list){    //write matching scales\n      selected = 0\n      let scale = ob.scale\n\n      if(lastkey === key){\n        html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        html.push( <span key={++key} className='propName'\n          data-selected='label' onClick={this.fsScaleClick}\n        >Matching scales:&nbsp;</span> )\n      }\n\n      if(qry.fretSelectMatch != null\n      && qry.fretSelectMatch.note === ob.note\n      && qry.fretSelectMatch.abr === scale.abr) selected = 'fretSelectMatch'\n\n      if(lastname !== null && lastname !== scale.name)\n        html.push( <i key={++key} > &mdash; </i> )\n      lastname = scale.name\n\n      html.push( \n        <span key={++key} className='ivl' onClick={this.fsScaleClick} title={ob.note +' ' +scale.name}\n        data-note={ob.note} data-abr={scale.abr} data-selected={selected} \n        > &#8200;{ob.note}&#8239;{scale.short}&#8200;</span> \n      )\n    }\n\n    return key\n  }\n  drawInfo( collapsed ){\n    let qry = this.props.qry,  selected = 0\n    let html = [], key=0, lastkey=null\n\n    if(qry.rootType === 'fretSelect'){    \n\n        // console.log('qry.fretSelect', qry.fretSelect)\n\n        html.push( <span key={++key} className='propName'\n           data-selected='label' onClick={this.infoNoteClick}\n          >Fret select:&nbsp;</span> )\n        let last = null\n        qry.fretSelect.forEach( nobj => {\n          if(last && last.note === nobj.note) return\n\n          if(qry.noteFilter.indexOf( nobj.note ) >= 0) selected = 'noteFilter'\n          else selected = 0\n          \n          html.push( <span key={++key} className='ivl'\n            onClick={this.infoNoteClick} data-note={nobj.note} data-selected={selected}\n          >&nbsp;{nobj.note} <sub>{nobj.ivl.abr}</sub> </span> )\n          last = nobj\n        })\n\n        if(qry.fretSelectMatch === null){    //no selected chord or scale to draw\n          html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n          html.push( <span key={++key} className='propName'\n           data-selected='label' onClick={this.infoNoteClick}\n          > &nbsp;</span> )\n        }\n        else{    //draw user select chord or scale match\n          html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n           html.push( <span key={++key} className='propName'\n           data-selected='label' onClick={this.infoNoteClick}\n          >Selected, {qry.fretSelectMatch.obj.fullName}:&nbsp;</span> )\n\n          for(let ivl of qry.fretSelectMatch.obj.ivls){   \n            if(qry.noteFilter.indexOf( ivl.note ) >= 0) selected = 'noteFilter'\n            else selected = 0\n\n            html.push( <span key={++key} className='ivl' onClick={this.infoNoteClick}\n              data-note={ivl.note} data-selected={selected}\n            >&nbsp;{ivl.note} <sub>{ivl.abr}</sub> </span> )\n          }\n        }\n\n      if(collapsed !== 'qryCollapsed'){\n        key = this.drawFretSelectMatches( html, key )\n      }\n    } else\n    if(qry.rootType === 'selNote' && this.props.selNoteVal === 'All'){    //special case\n      html.push( <span key={++key} className='propName'\n         data-selected='label' onClick={this.infoNoteClick}\n        >{'All Notes'}</span> )\n      if(qry.octave !== 0){\n        html.push( <span key={++key} className='ivl'>{': Octave '}{qry.octave} </span> )\n      }\n    }\n    else{   //draw scale, chord and interval labels and notes\n      lastkey = key\n      if(qry.scale !== null){\n        // html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        html.push( <span key={++key} className='propName'\n           data-selected='label' onClick={this.infoNoteClick}\n          >{qry.root.note +' ' +qry.scale.name +':'}</span> )\n        qry.scale.ivls.forEach( ivl => {\n          if(qry.noteFilter.indexOf( ivl.note ) >= 0) selected = 'noteFilter'\n          else selected = 0\n          \n          html.push( <span key={++key} className='ivl'\n            onClick={this.infoNoteClick} data-note={ivl.note} data-selected={selected}\n          >&nbsp;{ivl.note} <sub>{ivl.abr}</sub> </span> )\n        })\n      }\n      if(qry.chord !== null){\n        if(lastkey !== key)\n          html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n\n        html.push( <span key={++key} className='propName'\n           data-selected='label' onClick={this.infoNoteClick}\n          >{qry.root.note \n          +(qry.rootType === 'fretRoot' ?qry.root.octave :'')\n          +' ' +qry.chord.name +':'}</span> )\n\n        qry.chord.ivls.forEach( ivl => {\n          if(qry.noteFilter.indexOf( ivl.note ) >= 0) selected = 'noteFilter'\n          else selected = 0\n\n          html.push( <span key={++key} className='ivl'\n            onClick={this.infoNoteClick} data-note={ivl.note} data-selected={selected}\n           >&nbsp;{ivl.note} <sub>{ivl.abr}</sub> </span> )\n        })\n\n        if(qry.inversions !== null){    //draw inversions for major chords\n          let invrs = qry.inversions\n          html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n\n          html.push( <span key={++key} className='propName'\n           data-selected='label' onClick={this.infoNoteClick}\n          >{invrs.root \n           +(qry.rootType === 'fretRoot' ?qry.root.octave :'')\n           +qry.chord.abr +' Inversions:'}</span> )\n\n          for(let pos in invrs.positions){\n            let obj = invrs.positions[ pos ]\n            selected = (qry.inversionPos === pos ?'invr' :'')\n            html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n            html.push( <span key={++key} className='ivl' onClick={this.invrLabelClick}\n              data-selected={selected} data-invr={pos}\n              > {pos +' Position: '}</span> )\n            for(let num in obj){\n              let ivl = obj[num]\n              // let octave = ivl.octave\n              let octave = ([0,1].indexOf(ivl.octave) >= 0 ?'' :ivl.octave)\n              if(qry.noteFilter.indexOf( ivl.note ) >= 0) selected = 'noteFilter'\n              else selected = 0\n\n              html.push( <span key={++key} className='ivl'\n                onClick={this.infoNoteClick} data-note={ivl.note} data-selected={selected}\n               >&nbsp;{ivl.note +octave} <sub>{ivl.abr}</sub> </span> )\n            }\n          }\n        }\n\n      }\n      if(qry.ivl !== null){\n        if(qry.noteFilter.indexOf( qry.ivl.note ) >= 0) selected = 'noteFilter'\n        else selected = 0\n        \n        if(lastkey !== key)\n          html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        html.push( <span key={++key} className='propName'\n           data-selected='label' onClick={this.infoNoteClick}\n          >{qry.note \n            +(qry.rootType === 'fretRoot' ?qry.root.octave :'')\n            +' + ' \n            +qry.ivl.name +':'\n           }</span> )\n        html.push( <span key={++key} className='ivl'\n          onClick={this.infoNoteClick} data-note={qry.ivl.note} data-selected={selected}\n        >&nbsp;{qry.ivl.note} <sub>{qry.ivl.abr}</sub> </span> )\n      }\n    }\n    \n    if(html.length === 0) return null\n        // {arrow}\n    return (\n      <div className='infoPnl'>\n         <div className='infoDiv'>\n           {html}\n         </div>\n      </div>\n    )      \n  }\n \n  render(){\n    // console.log('queryPnl.render()', this.props)\n    let qry = this.props.qry\n    let collapsed = (qry.collapsed ?'qryCollapsed' :'qryExpanded')\n\n    let selNote = null\n    let selOct = null\n    let selInt = null\n    let selScale = null\n    let selChord = null\n    if(qry.rootType !== 'fretSelect') { //optimization\n      selNote = this.drawSelNote()\n      selOct = this.drawSelOctave()\n      selInt = this.drawSelInterval()\n      selScale = this.drawSelScale()\n      selChord = this.drawSelChord()\n    }\n    let infoPnl = this.drawInfo( collapsed )\n\n    let arrow = null\n    if(collapsed === 'qryCollapsed')\n      arrow = (<div className='qryBtn qryBtnExpand' onClick={this.btnCollapseClick} title=\"Show query panel\" > <div>&#10148;</div> </div>)\n\n    return (\n      <div className={'queryPnl '+collapsed} >\n    <table className='tbQuery' ><tbody><tr><td className='qryBtnsLeft'>\n        {arrow}\n        <div className='qryBtn qryBtnCollapse' onClick={this.btnCollapseClick}\n            title=\"Hide query panel\" >\n          <div>&#10148;</div>\n        </div>\n    </td><td className='qryContent'>\n        <div className='queryControls' data-roottype={qry.rootType}>\n          {selNote}\n          {selOct}\n          {selScale}\n          {selChord}\n          {selInt}\n        </div>\n        {infoPnl}\n    </td><td className='qryBtnsRight'>\n        <div className='qryBtn qryBtnClear' onClick={this.btnClearClick} title='Reset query controls'>&#8635;</div>\n        <div className='qryBtn qryBtnDupe' onClick={this.btnDupeClick} title='Duplicate fretboard' >&#10010;</div>\n        { qry.fbid === 0 ?null\n          :<div className='qryBtn qryBtnDel' onClick={this.btnDelClick} title='Remove this fretboard' >&#10000;</div>\n        }\n    </td></tr></tbody></table>\n      </div>\n    )\n  }\n}\n\nexport default QueryPnl\n","/*\nFretboard.js\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - top level container for fretboard controls of GuitrJoe app\n  - store shared state for FretPnl.js and QueryPnl.js\n\n*/\n\nimport React from 'react';\nimport './Fretboard.css';\n\nimport FretPnl from \"./FretPnl.js\";\nimport QueryPnl from \"./QueryPnl.js\";\nimport q from \"./guitar_lib.js\";\n\nclass Fretboard extends React.Component{\n\n  constructor (props) {\n    console.log('Fretboard.constructor()', props)\n    super(props)\n    this.qry = null\n    //keep state private to control children\n    this.state = {\n\t\t\tfbid:(props.fbid ?props.fbid :0),\n\t\t\t\n      collapsed:(props.collapsed ?props.collapsed :false),\n      fretFirst:(props.fretFirst ?props.fretFirst :0),\n      fretLast:(props.fretLast ?props.fretLast :q.fretboard.fretMax),\n      fretBtnText:(props.fretBtnText ?props.fretBtnText :'NoteFirst'),    //one of: NoteFirst, IvlFirst, NoteTab, NoteAbc\n      fretFilter:(props.fretFilter ?props.fretFilter :[]),      //csv of fretN, if found then disable fret\n      strgFilter:(props.strgFilter ?props.strgFilter :[]),    //csv of strN, if found then hide notes\n      noteFilter:(props.noteFilter ?props.noteFilter :[]),    //notes on fetboard where button.data-selected=2; set by clicking infoPnl note\n      fretSelect:(props.fretSelect ?props.fretSelect :[]),    //when rootType=fretSelect, list of frets and related data; set in fretPnl.fretClick()\n      fretSelectMatch:(props.fretSelectMatch ?props.fretSelectMatch :null),    //user selects a chord or scale to view: {type, name}\n\n      rootType:(props.rootType ?props.rootType :''),    //one of: ['', fretRoot, fretSelect, selNote]\n      fretRoot:(props.fretRoot ?props.fretRoot :null),          //note object, set when fret clicked\n      selNoteVal:(props.selNoteVal ?props.selNoteVal :''),   //string, contains note selected in selNote\n      octave:(props.octave ?props.octave :0), \n      scaleName:(props.scaleName ?props.scaleName :''),\n      chordName:(props.chordName ?props.chordName :''),\n      ivlName:(props.ivlName ?props.ivlName :''), \n      \n      inversionPos:(props.inversionPos ?props.inversionPos :null),    //user selected inversion position to display (maj or maj7 selected)\n    }\n    this.duplicate = this.duplicate.bind(this)\n    this.remove = this.remove.bind(this)\n    this.reset = this.reset.bind(this)\n    this.stateChange = this.stateChange.bind(this)\n    this.strgFiltered = this.strgFiltered.bind(this)\n    this.makeQuery = this.makeQuery.bind(this)\n    this.fretSelectFind = this.fretSelectFind.bind(this)\n    this.inversionNoteByTab = this.inversionNoteByTab.bind(this)\n  }  \n  reset(){\n    this.setState({ collapsed:false })\n    this.setState({ fretSelectMatch:null })\n    this.setState({ fretSelect:[] })\n    this.setState({ noteFilter:[] })\n    this.setState({ strgFilter:[] })\n    this.setState({ fretFilter:[] })\n    this.setState({ scaleName:'' })\n    this.setState({ chordName:'' })\n    this.setState({ inversionPos:null })\n    this.setState({ rootType:'' })\n    this.setState({ ivlName:'' })\n    this.setState({ fretRoot:null })\n    this.setState({ selNoteVal:'' })\n    this.setState({ octave:0 })\n    this.setState({ fretBtnText:'NoteFirst' })\n  }\n  strgFiltered( strN ){\n    strN = Number(strN)\n    return ( this.state.strgFilter.indexOf( strN ) >= 0 )\n  }\n  remove(){\n    this.props.remove( this )\n  }\n  duplicate(){\n    this.props.duplicate( this )\n  }\n\n  inversionNoteByTab( tab ){\n    if(this.state.inversionPos === null) return null\n    for(let nobj of this.qry.inversionNotes){\n      if(nobj.tab === tab) return nobj \n    } \n    return null\n  }\n  fretSelectFind( objOrTab ){\n    let list = this.state.fretSelect,\n      fnd = -1\n\n    if(list.length === 0 || objOrTab === null) return fnd  //empty list\n\n    let  tab = (typeof objOrTab === 'string' ?objOrTab :objOrTab.tab)    //find in list\n    for(let ii = 0; ii < list.length; ii++){\n      if(tab === list[ii].tab){\n        fnd = ii\n        break\n      }\n    }\n    return fnd\n  }\n  stateChange( key, val){\n    // if(key === 'rootType')   //only manually set below; can be prop instead of state\n    //   this.setState({ rootType:val })\n    // else\n    if(key === 'collapsed'){\n      this.setState({ collapsed:val })\n    }else\n    if(key === 'noteFilter'){\n\n      if(val === 'clear'){  //empty list\n        this.setState({ noteFilter:[] })\n      }\n      else {    //default operation\n        let list = this.state.noteFilter.slice()\n        let idx = list.indexOf( val )\n   \n        if(idx < 0) list.push( val )\n        else list.splice( idx, 1 )\n        \n        this.setState({ noteFilter:list })\n      }\n    }else\n    if(key === 'fretBtnText'){\n      this.setState({ fretBtnText:val })\n    }else\n    if(key === 'fretFilter'){\n      let list = this.state.fretFilter.slice()\n      let idx = list.indexOf( val )\n \n      if(idx < 0) list.push( val )\n      else list.splice( idx, 1 )\n\n      this.setState({ fretFilter:list })\n    }else\n    if(key === 'fretRoot'){\n      this.setState({ fretRoot:val })\n\n      if(val === null)\n         this.setState({ rootType:'' })\n      else\n        this.setState({ rootType:'fretRoot' })\n      this.setState({ selNoteVal:'' })\n      this.setState({ fretSelect:[] })\n      // this.setState({ fretSelectMatch:null })\n    }else\n    if(key === 'selNoteVal'){\n      this.setState({ selNoteVal:val })\n\n      if(val === '')\n        this.setState({ rootType:'' })\n      else\n        this.setState({ rootType:'selNote' })\n      this.setState({ fretRoot:null })\n      this.setState({ fretSelect:[] })\n      // this.setState({ fretSelectMatch:null })\n    }else\n    if(key === 'fretSelect'){\n\n      if(val === null){   //disable fretSelect mode\n        this.setState({ fretSelect:[] })\n        // this.setState({ fretSelectMatch:null })\n        this.setState({ rootType:'' })\n        this.setState({ fretRoot:null })\n        this.setState({ selNoteVal:'' })\n        return\n      }\n\n      if(Array.isArray(val) === false)  //process as array due to React state handling\n        val = [val]\n\n      let list = this.state.fretSelect.slice(),\n        idx = null, root=null\n\n      for(let nobj of val){\n        idx = this.fretSelectFind( nobj )\n        if(idx < 0) {\n          if(list.length === 0){\n            nobj.ivl = q.intervals.byName( 'P1' )\n            list.push( nobj )\n          }\n          else{\n            if(root === null) root = list[0]\n            let semis = (nobj.semis -root.semis) % 12\n            if(semis < 12) semis = 12 +semis\n            nobj.ivl = q.intervals.bySemis( semis, true )\n            list.push( nobj )\n          }\n        }else \n          list.splice( idx, 1 )\n      }\n      list.sort(function (a, b) {\n        return a.ivl.semis - b.ivl.semis\n      })\n\n      this.setState({ fretSelect:list })\n      if(this.state.rootType !== 'fretSelect'){   //set rootType to fretSelect\n        this.setState({ rootType:'fretSelect' })\n        this.setState({ fretRoot:null })\n        this.setState({ selNoteVal:'' })\n      }\n    }else\n    if(key === 'fretSelectMatch'){\n      this.setState({ fretSelectMatch:val })\n    }else\n    if(key === 'strgFilter'){\n      val = Number( val )\n      let list = this.state.strgFilter.slice()\n      let idx = list.indexOf( val )\n \n      if(idx < 0) list.push( val )\n      else list.splice( idx, 1 )\n\n      this.setState({ strgFilter:list })\n    }else\n    if(key === 'fretFirst')\n      this.setState({ fretFirst:val })\n    else\n    if(key === 'fretLast')\n      this.setState({ fretLast:val })\n    else\n    if(key === 'octave')\n      this.setState({ octave:val })\n    else\n    if(key === 'scaleName'){\n      this.setState({ scaleName:val })\n    }else\n    if(key === 'chordName'){\n      this.setState({ chordName:val })\n    }else\n    if(key === 'inversionPos'){\n     if(this.state.inversionPos === val)\n       val = null\n     this.setState({ inversionPos:val })\n    }else\n    if(key === 'ivlName'){\n      this.setState({ ivlName:val })\n    }else\n    if(key === 'semis')\n      this.setState({ semis:val })\n  }\n  makeQuery(){\n    let qry = {\n      fbid:this.state.fbid,\n      rootType: this.state.rootType,\n      root: null,\n      note: (this.state.rootType === 'fretRoot' \n              ? this.state.fretRoot.notes[0] \n              : this.state.selNoteVal ), \n      octave: this.state.octave,\n      scale: null,\n      chord:null,\n      inversions:null,\n      inversionPos:this.state.inversionPos,\n      inversionNotes:null,\n      ivl: null,\n\n      collapsed: this.state.collapsed,\n      fretBtnText: this.state.fretBtnText,\n      fretFilter: this.state.fretFilter,\n      noteFilter: this.state.noteFilter,\n      fretSelect: this.state.fretSelect,\n      fretSelectMatch: this.state.fretSelectMatch,\n    }\n    if(qry.rootType === 'fretRoot')\n      qry.root = this.state.fretRoot    //note object, set in FretPnl.fretClick()\n    if(qry.rootType === 'selNote' && qry.note !== '' && qry.note !== 'All')\n      qry.root = q.notes.objByNote( qry.note )    //note object\n    if(qry.rootType === 'fretSelect')\n      qry.root = this.state.fretSelect[0]    //note object, set in FretPnl.fretClick()\n  \n   // if(qry.note === 'All'){\n      //qry.fretBtnText = 'NoteAbc'\n   // }\n  \n    if(qry.fretSelectMatch != null){\n      if(qry.fretSelectMatch.type === 'chord')\n        qry.fretSelectMatch.obj = q.chords.obj( qry.fretSelectMatch.note, qry.fretSelectMatch.abr )\n      else\n      if(qry.fretSelectMatch.type === 'scale')\n        qry.fretSelectMatch.obj = q.scales.obj( qry.fretSelectMatch.note, qry.fretSelectMatch.abr )\n    }\n\n    if(this.state.scaleName !== '' && qry.root)\n      qry.scale = q.scales.obj( qry.note, this.state.scaleName )\n    if(this.state.chordName !== '' && qry.root){\n      qry.chord = q.chords.obj( qry.note, this.state.chordName )\n      qry.inversions = q.chords.inversions(qry.root.note, qry.chord.abr, qry.root.octave )\n      if(qry.inversionPos !== null){\n        qry.inversionNotes = q.chords.inversionNotes(  qry.inversions, qry.inversionPos )\n      }\n    }\n    if(this.state.ivlName !== '' && qry.root){\n      qry.ivl = q.intervals.byName( this.state.ivlName )    //this.props.ivlName == abr\n      qry.ivl.note = q.notes.calc( qry.note, qry.ivl )\n      // qry.ivl.notes = q.notes.bySemis( qry.root.semis +qry.ivl.semis )\n    }\n    this.qry = qry\n    return qry\n  }\n  render(){\n    let qry = this.makeQuery()\n    console.log('Fretboard.render()', this.props, this.state, qry)\n    return(\n      <div className='fretboard' id={'Fretboard'+qry.fbid}>\n        <FretPnl\n          collapsed={this.state.collapsed}\n          fretFirst={this.state.fretFirst}\n          fretLast={this.state.fretLast}\n\n          ivlName={this.state.ivlName}\n\n          selNoteVal={this.state.selNoteVal} \n\n          qry={qry}\n          stateChange={this.stateChange}\n          strgFiltered={this.strgFiltered}\n          fretSelectFind={this.fretSelectFind}\n          inversionNoteByTab={this.inversionNoteByTab}\n        />\n        <QueryPnl \n          collapsed={this.state.collapsed}\n          fretFirst={this.state.fretFirst}\n          fretLast={this.state.fretLast}\n\n          selNoteVal={this.state.selNoteVal} \n          chordName={this.state.chordName}\n          scaleName={this.state.scaleName}\n          ivlName={this.state.ivlName}\n\n          duplicate={this.duplicate}\n          qry={qry}\n          remove={this.remove}\n          reset={this.reset} \n          stateChange={this.stateChange}\n          strgFiltered={this.strgFiltered} \n         />\n      </div>\n    )\n  }\n}\n\nexport default Fretboard;\n","/*\n  About Dialog\n  - for GuitarJoe by Chris DeFreitas\n\n  requires:\n    Dialog.css\n*/\nimport React from 'react';\nimport Popup from 'reactjs-popup';\nimport './Dialog.css';\n\nconst About = () => (  \n  <Popup\n    trigger={<button className=\"btnInfo\">About</button>}\n    modal\n    nested\n  >\n    {close => (\n      <div className=\"modal\">\n        <div className=\"header\"> About GuitarJoe </div>\n        <div className=\"content\">\nImportant: <br />\n&nbsp;- Everything is clickable...please explore<br />\n&nbsp;- use your browser's zoom controls to enlarge/shrink the controls\n<br /><br />\nGuitarJoe is a free web application, no ads, no logins, no tracking.  \nThe goal was to create a tool that would make guitar theory accessible while practicing.\nI am not anything close to a musician, so\nI was going crazy taking notes and diagraming chords, scales and intervals: I needed a tool\nto facilitate my understanding so I could focus on the guitar instead of managing scraps of information.\nThis application has successfully reduced my hair loss--I hope it has the same effect on you!\n<br /><br />\nAt this point it is a proof of concept as I wrangle technologies and concepts.  \nI am an IT guy who is (obviously) not musically gifted, so there is a lot of research behind the functionality.\nMy aim is to keep the app freely available to support those learning guitar; a warm thanks for those who have supported my various journeys.\n<br /><br />\n&nbsp;- Tested to work in Chrome(Windows), Firefox(Windows, Linux), and Safari(iPad, iPhone)<br />\n&nbsp;- Review documentation, updates and references in the <a href='https://github.com/ChrisDeFreitas/guitarjoe/' target='_new'>GitHub Repository</a> <br />\n&nbsp;- Send comments and bugs to <a href='mailto:ChrisDeFreitas777@gmail.com?subject=GuitarJoe:'>ChrisDeFreitas777@gmail.com</a>\n<br /><br />\nThanks to<br />\n&nbsp;- Application hosted on <a href='https://github.com/ChrisDeFreitas/guitarjoe' target='_new'>Github</a>  <br />\n&nbsp;- Background image from <a href='https://www.flickr.com/photos/webtreatsetc/with/4514047664/' target='_new'>WebTreats ETC</a> <br />\n&nbsp;- Built with the <a href='https://reactjs.org/' target='_new'>React</a> Javascript library <br />\n&nbsp;- Chords verified using <a href='https://www.omnicalculator.com/other/chord' target='_new'>Omni Chord Calculator</a><br />\n&nbsp;- <a href='https://chir.ag/projects/name-that-color/'>Name that Color</a> by Chirag Meta\n&nbsp;- Fuggles font by Robert Leuschke on <a href='https://fonts.google.com/?query=Robert+Leuschke/' target='_new'>Google Fonts</a> <br />\n&nbsp;- Guitar icon by monkik from the <a href='https://thenounproject.com/term/guitar/2588464/' target='_new'>Noun Project</a> <br />\n&nbsp;- Intervals verified using <a href='https://www.omnicalculator.com/other/music-interval' target='_new'>Omni Music Interval Calculator</a><br />\n&nbsp;- Music theory from <a href='https://www.wikipedia.org/' target='_new'>Wikipedia</a><br />\n&nbsp;- Popup control from <a href='https://react-popup.elazizi.com/' target='_new'>reactjs-popup</a> <br />\n&nbsp;- Scales researched with <a href='https://ianring.com/musictheory/scales' target='_new'>A Study of Scales</a> at <a href='https://ianring.com/musictheory/'>The Exciting Universe Of Music Theory</a><br />\n&nbsp;- Scales researched with <a href='https://www.scales-chords.com/scalenav.php' target='_new'>ScaleChords' Musical Scale Navigator</a><br />\n<br />\nCreated by Chris DeFreitas, BC Canada<br />\n        </div>\n        <div className=\"actions\">\n          <button\n            className=\"button\"\n            onClick={() => {\n              console.log('modal closed ');\n              close();\n            }}\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    )}\n  </Popup>\n)\n\nexport default About","/*\n  App.js\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - entrypoint for GuitrJoe app\n\n*/\nimport React, { useState } from 'react';\n\nimport './App.css';\n// import './Bgnd.css';\n// import Bgnd from \"./Bgnd.js\";\nimport Fretboard from \"./Fretboard.js\"\nimport About from \"./AboutDlg.js\"\nimport { ReactComponent as Logo } from './resources/logo.svg'\n\n\nfunction App(){\n\n  const [fbs, setFbs] = useState( [{id:0, state:true}] )  //one cell for each fretboard instance\n  const [newid, setNewId] = useState( null )\t\t// assigned in duplicate()\n  \n  function indexOfFbid( fbid ){\n    for(let ii=0; ii < fbs.length; ii++){\n      if(fbs[ii].id === fbid)\n        return ii\n    }\n    return false\n  }\n  function duplicate( fretboard ){\n    let fbid = fretboard.props.fbid,\n      list = fbs.slice(),\n      nid = list.length,\n      obj = {id:nid, state:fretboard.state},\n      idx = indexOfFbid( fbid )\n      \n    if(idx === false)\n      throw new Error(`App.duplicate() error, fbid=[${fbid}] not found.`)\n      \n    list.splice( (idx +1), 0, obj)\t\t\n    setFbs( list )\n    setNewId( nid )\n    // console.log('App.duplicate', list)\n  }\n  function remove( fretboard ){\n    let fbid = fretboard.props.fbid,\n      list = fbs.slice(),\n      idx = indexOfFbid( fbid )\n     \n    if(idx === false)\n      throw new Error(`App.remove() error, fbid=[${fbid}] not found.`)\n\n    list[ idx ].state = false\n    setNewId( null )\n    setFbs( list )\n    // console.log('App.remove()', fbid, list)\n  }\n\n  let list = [], fbCount=fbs.length\n  for(let ii=0; ii < fbCount; ii++){\n    let el = null,\n      id = fbs[ii].id,       //use in .key to help react\n      state = fbs[ii].state  //one of: true, state object, false(a deleted fretboard)\n    if(id === newid){   //create new fretboard\n      el = <Fretboard key={id} fbid={id} duplicate={duplicate} remove={remove} \n\t\t\t\tcollapsed={state.collapsed}\n\t\t\t\tfretFirst={state.fretFirst}\n\t\t\t\tfretLast={state.fretLast}\n\t\t\t\tfretBtnText={state.fretBtnText}\n\t\t\t\tfretFilter={state.fretFilter}\n\t\t\t\tstrgFltrList={state.strgFltrList}\n        noteFilter={state.noteFilter}\n        fretSelect={state.fretSelect}\n        fretSelectMatch={state.fretSelectMatch}\n\t\t\t\trootType={state.rootType}\n\t\t\t\tfretRoot={state.fretRoot}\n\t\t\t\tselNoteVal={state.selNoteVal} \n\t\t\t\toctave={state.octave} \n\t\t\t\tscaleName={state.scaleName}\n\t\t\t\tchordName={state.chordName}\n\t\t\t\tivlName={state.ivlName}\n      />\n    }else{\n      if(state !== false) //existing fretboard; magic of react does not overwrite old data\n        el = <Fretboard key={id} fbid={id} duplicate={duplicate} remove={remove} />\n    }\n    if(el != null)\n      list.push( el )\n  }\n\n  return (\n    <div className=\"App\">\n\t\t\t<header className=\"App-header header\">\n        <Logo className=\"Logo\" alt=\"Logo\" />\n        GuitarJoe v0.1.4 <About />\n      </header>\n\t\t\t{list}\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n\t  <App />\n\t</React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals( console.log );\n"],"sourceRoot":""}